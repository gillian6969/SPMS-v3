{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, computed, onMounted } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nimport axios from 'axios';\nexport default {\n  name: 'EditProfile',\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n    const form = ref({\n      firstName: '',\n      lastName: '',\n      email: '',\n      teachingYear: ''\n    });\n    const isTeacher = computed(() => store.getters.isTeacher);\n    const user = computed(() => store.state.auth.user);\n    onMounted(() => {\n      // Initialize form with current user data\n      if (user.value) {\n        form.value = {\n          firstName: user.value.firstName || '',\n          lastName: user.value.lastName || '',\n          email: user.value.email || '',\n          teachingYear: user.value.teachingYear || ''\n        };\n      }\n    });\n    const updateProfile = async () => {\n      try {\n        const response = await axios.put('/api/users/profile', form.value, {\n          headers: {\n            Authorization: `Bearer ${store.state.auth.token}`\n          }\n        });\n        if (response.data) {\n          // Update store with new user data\n          store.commit('SET_USER', response.data);\n          // Save to localStorage\n          localStorage.setItem('user', JSON.stringify(response.data));\n          // Redirect to profile\n          router.push('/profile');\n        }\n      } catch (error) {\n        console.error('Failed to update profile:', error);\n        alert(error.response?.data?.message || 'Failed to update profile');\n      }\n    };\n    return {\n      form,\n      isTeacher,\n      updateProfile\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","useStore","useRouter","axios","name","setup","store","router","form","firstName","lastName","email","teachingYear","isTeacher","getters","user","state","auth","value","updateProfile","response","put","headers","Authorization","token","data","commit","localStorage","setItem","JSON","stringify","push","error","console","alert","message"],"sources":["D:\\au_dev\\client\\src\\views\\EditProfile.vue"],"sourcesContent":["<template>\r\n  <div class=\"edit-profile\">\r\n    <div class=\"card\">\r\n      <div class=\"card-header\">\r\n        <h4>Edit Profile</h4>\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <form @submit.prevent=\"updateProfile\">\r\n          <div class=\"mb-3\">\r\n            <label class=\"form-label\">First Name</label>\r\n            <input \r\n              type=\"text\" \r\n              class=\"form-control\" \r\n              v-model=\"form.firstName\"\r\n              required\r\n            >\r\n          </div>\r\n          \r\n          <div class=\"mb-3\">\r\n            <label class=\"form-label\">Last Name</label>\r\n            <input \r\n              type=\"text\" \r\n              class=\"form-control\" \r\n              v-model=\"form.lastName\"\r\n              required\r\n            >\r\n          </div>\r\n          \r\n          <div class=\"mb-3\">\r\n            <label class=\"form-label\">Email</label>\r\n            <input \r\n              type=\"email\" \r\n              class=\"form-control\" \r\n              v-model=\"form.email\"\r\n              required\r\n            >\r\n          </div>\r\n\r\n          <div v-if=\"isTeacher\" class=\"mb-3\">\r\n            <label class=\"form-label\">Teaching Year</label>\r\n            <select class=\"form-select\" v-model=\"form.teachingYear\" required>\r\n              <option value=\"\">Select Year</option>\r\n              <option value=\"1st\">1st Year</option>\r\n              <option value=\"2nd\">2nd Year</option>\r\n              <option value=\"3rd\">3rd Year</option>\r\n              <option value=\"4th\">4th Year</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div class=\"d-flex justify-content-end gap-2\">\r\n            <router-link to=\"/dashboard\" class=\"btn btn-secondary\">Cancel</router-link>\r\n            <button type=\"submit\" class=\"btn btn-primary\">Save Changes</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed, onMounted } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRouter } from 'vue-router'\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'EditProfile',\r\n  setup() {\r\n    const store = useStore()\r\n    const router = useRouter()\r\n    const form = ref({\r\n      firstName: '',\r\n      lastName: '',\r\n      email: '',\r\n      teachingYear: ''\r\n    })\r\n\r\n    const isTeacher = computed(() => store.getters.isTeacher)\r\n    const user = computed(() => store.state.auth.user)\r\n\r\n    onMounted(() => {\r\n      // Initialize form with current user data\r\n      if (user.value) {\r\n        form.value = {\r\n          firstName: user.value.firstName || '',\r\n          lastName: user.value.lastName || '',\r\n          email: user.value.email || '',\r\n          teachingYear: user.value.teachingYear || ''\r\n        }\r\n      }\r\n    })\r\n\r\n    const updateProfile = async () => {\r\n      try {\r\n        const response = await axios.put('/api/users/profile', form.value, {\r\n          headers: {\r\n            Authorization: `Bearer ${store.state.auth.token}`\r\n          }\r\n        })\r\n\r\n        if (response.data) {\r\n          // Update store with new user data\r\n          store.commit('SET_USER', response.data)\r\n          // Save to localStorage\r\n          localStorage.setItem('user', JSON.stringify(response.data))\r\n          // Redirect to profile\r\n          router.push('/profile')\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to update profile:', error)\r\n        alert(error.response?.data?.message || 'Failed to update profile')\r\n      }\r\n    }\r\n\r\n    return {\r\n      form,\r\n      isTeacher,\r\n      updateProfile\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.edit-profile {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  padding: 2rem;\r\n}\r\n\r\n.card {\r\n  background: white;\r\n  border: none;\r\n  border-radius: 20px;\r\n  box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1),\r\n              0 5px 15px rgba(0, 0, 0, 0.05);\r\n  overflow: hidden;\r\n  backdrop-filter: blur(10px);\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  position: relative;\r\n}\r\n\r\n.card::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: radial-gradient(circle at top right, rgba(32, 52, 100, 0.03), transparent);\r\n  pointer-events: none;\r\n}\r\n\r\n.card-header {\r\n  background: linear-gradient(135deg, #203464, #2a4580);\r\n  border: none;\r\n  padding: 2rem;\r\n  position: relative;\r\n  overflow: hidden;\r\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.card-header::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: radial-gradient(circle at top right, rgba(255, 255, 255, 0.1), transparent);\r\n  pointer-events: none;\r\n}\r\n\r\n.card-header h4 {\r\n  margin: 0;\r\n  color: white;\r\n  font-size: 1.5rem;\r\n  font-weight: 600;\r\n  position: relative;\r\n}\r\n\r\n.card-body {\r\n  padding: 2.5rem;\r\n  position: relative;\r\n}\r\n\r\n.form-label {\r\n  font-weight: 500;\r\n  color: #64748b;\r\n  font-size: 0.9rem;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.5px;\r\n  margin-bottom: 0.75rem;\r\n  display: block;\r\n  transition: color 0.3s ease;\r\n}\r\n\r\n.form-control,\r\n.form-select {\r\n  padding: 0.75rem 1rem;\r\n  border-radius: 12px;\r\n  border: 2px solid #e2e8f0;\r\n  font-size: 1rem;\r\n  transition: all 0.3s ease;\r\n  background-color: #f8fafc;\r\n  width: 100%;\r\n}\r\n\r\n.form-control:focus,\r\n.form-select:focus {\r\n  border-color: #203464;\r\n  box-shadow: 0 0 0 4px rgba(32, 52, 100, 0.1);\r\n  background-color: white;\r\n  outline: none;\r\n}\r\n\r\n.form-control:hover,\r\n.form-select:hover {\r\n  border-color: #cbd5e1;\r\n}\r\n\r\n.mb-3 {\r\n  margin-bottom: 1.5rem;\r\n  position: relative;\r\n}\r\n\r\n.mb-3:focus-within .form-label {\r\n  color: #203464;\r\n}\r\n\r\n.d-flex {\r\n  margin-top: 2.5rem;\r\n  padding-top: 2rem;\r\n  border-top: 1px solid rgba(0, 0, 0, 0.05);\r\n  position: relative;\r\n}\r\n\r\n.d-flex::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: -1px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  width: 50px;\r\n  height: 2px;\r\n  background: linear-gradient(90deg, transparent, #203464, transparent);\r\n}\r\n\r\n.btn {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 0.75rem;\r\n  padding: 0.875rem 2rem;\r\n  border-radius: 12px;\r\n  font-weight: 500;\r\n  font-size: 1rem;\r\n  transition: all 0.3s ease;\r\n  border: none;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.btn::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\r\n  transform: translateX(-100%);\r\n  transition: transform 0.5s ease;\r\n}\r\n\r\n.btn:hover::before {\r\n  transform: translateX(100%);\r\n}\r\n\r\n.btn-primary {\r\n  background: linear-gradient(135deg, #203464, #2a4580);\r\n  color: white;\r\n  box-shadow: 0 4px 15px rgba(32, 52, 100, 0.3);\r\n}\r\n\r\n.btn-primary:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 8px 25px rgba(32, 52, 100, 0.4);\r\n}\r\n\r\n.btn-secondary {\r\n  background: #f1f5f9;\r\n  color: #475569;\r\n  border: 1px solid rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background: #e2e8f0;\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.btn-loading {\r\n  position: relative;\r\n  pointer-events: none;\r\n}\r\n\r\n.btn-loading::after {\r\n  content: '';\r\n  position: absolute;\r\n  width: 20px;\r\n  height: 20px;\r\n  border: 2px solid transparent;\r\n  border-top-color: currentColor;\r\n  border-radius: 50%;\r\n  animation: button-loading 0.8s ease infinite;\r\n  left: calc(50% - 10px);\r\n}\r\n\r\n@keyframes button-loading {\r\n  from {\r\n    transform: rotate(0turn);\r\n  }\r\n  to {\r\n    transform: rotate(1turn);\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .edit-profile {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .card-header {\r\n    padding: 1.5rem;\r\n  }\r\n  \r\n  .card-body {\r\n    padding: 1.5rem;\r\n  }\r\n  \r\n  .d-flex {\r\n    flex-direction: column;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .btn {\r\n    width: 100%;\r\n    justify-content: center;\r\n  }\r\n}\r\n</style> "],"mappings":";AA4DA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAQ,QAAS,KAAI;AAC7C,SAASC,QAAO,QAAS,MAAK;AAC9B,SAASC,SAAQ,QAAS,YAAW;AACrC,OAAOC,KAAI,MAAO,OAAM;AAExB,eAAe;EACbC,IAAI,EAAE,aAAa;EACnBC,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIL,QAAQ,CAAC;IACvB,MAAMM,MAAK,GAAIL,SAAS,CAAC;IACzB,MAAMM,IAAG,GAAIV,GAAG,CAAC;MACfW,SAAS,EAAE,EAAE;MACbC,QAAQ,EAAE,EAAE;MACZC,KAAK,EAAE,EAAE;MACTC,YAAY,EAAE;IAChB,CAAC;IAED,MAAMC,SAAQ,GAAId,QAAQ,CAAC,MAAMO,KAAK,CAACQ,OAAO,CAACD,SAAS;IACxD,MAAME,IAAG,GAAIhB,QAAQ,CAAC,MAAMO,KAAK,CAACU,KAAK,CAACC,IAAI,CAACF,IAAI;IAEjDf,SAAS,CAAC,MAAM;MACd;MACA,IAAIe,IAAI,CAACG,KAAK,EAAE;QACdV,IAAI,CAACU,KAAI,GAAI;UACXT,SAAS,EAAEM,IAAI,CAACG,KAAK,CAACT,SAAQ,IAAK,EAAE;UACrCC,QAAQ,EAAEK,IAAI,CAACG,KAAK,CAACR,QAAO,IAAK,EAAE;UACnCC,KAAK,EAAEI,IAAI,CAACG,KAAK,CAACP,KAAI,IAAK,EAAE;UAC7BC,YAAY,EAAEG,IAAI,CAACG,KAAK,CAACN,YAAW,IAAK;QAC3C;MACF;IACF,CAAC;IAED,MAAMO,aAAY,GAAI,MAAAA,CAAA,KAAY;MAChC,IAAI;QACF,MAAMC,QAAO,GAAI,MAAMjB,KAAK,CAACkB,GAAG,CAAC,oBAAoB,EAAEb,IAAI,CAACU,KAAK,EAAE;UACjEI,OAAO,EAAE;YACPC,aAAa,EAAE,UAAUjB,KAAK,CAACU,KAAK,CAACC,IAAI,CAACO,KAAK;UACjD;QACF,CAAC;QAED,IAAIJ,QAAQ,CAACK,IAAI,EAAE;UACjB;UACAnB,KAAK,CAACoB,MAAM,CAAC,UAAU,EAAEN,QAAQ,CAACK,IAAI;UACtC;UACAE,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACV,QAAQ,CAACK,IAAI,CAAC;UAC1D;UACAlB,MAAM,CAACwB,IAAI,CAAC,UAAU;QACxB;MACF,EAAE,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK;QAChDE,KAAK,CAACF,KAAK,CAACZ,QAAQ,EAAEK,IAAI,EAAEU,OAAM,IAAK,0BAA0B;MACnE;IACF;IAEA,OAAO;MACL3B,IAAI;MACJK,SAAS;MACTM;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}