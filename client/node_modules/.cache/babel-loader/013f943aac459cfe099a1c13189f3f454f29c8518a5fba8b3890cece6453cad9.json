{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport axios from 'axios';\nimport { Chart as ChartJS, Title, Tooltip, Legend, BarElement, CategoryScale, LinearScale } from 'chart.js';\nimport { onMounted, onUnmounted, ref } from 'vue';\nimport { Bar } from 'vue-chartjs';\n\n// Create axios instance with correct base URL\n\nexport default {\n  __name: 'StudentSurveyStat',\n  props: {\n    _id: String,\n    surveyForm: Array\n  },\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const api = axios.create({\n      baseURL: 'http://localhost:8081/api',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    const props = __props;\n    const mySurvey = ref([]);\n    const data = ref({});\n    ChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\n    onUnmounted(() => {\n      mySurvey.value = [];\n      data.value = {};\n    });\n    onMounted(async () => {\n      const surveyResponse = await api.get(`/survey/stats`, {\n        params: {\n          _id: props._id\n        }\n      });\n      mySurvey.value = surveyResponse.data;\n      data.value = {\n        labels: mySurvey.value?.map(s => s.type + ' Problem') || 'Not available',\n        datasets: [{\n          label: 'Average Score Survey',\n          backgroundColor: '#f87979',\n          data: mySurvey.value?.map(s => s.average) || []\n        }]\n      };\n    });\n    const options = ref({\n      //   responsive: true ,\n      //   maintainAspectRatio: false\n    });\n    const __returned__ = {\n      api,\n      props,\n      mySurvey,\n      data,\n      options,\n      get axios() {\n        return axios;\n      },\n      get ChartJS() {\n        return ChartJS;\n      },\n      get Title() {\n        return Title;\n      },\n      get Tooltip() {\n        return Tooltip;\n      },\n      get Legend() {\n        return Legend;\n      },\n      get BarElement() {\n        return BarElement;\n      },\n      get CategoryScale() {\n        return CategoryScale;\n      },\n      get LinearScale() {\n        return LinearScale;\n      },\n      onMounted,\n      onUnmounted,\n      ref,\n      get Bar() {\n        return Bar;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["axios","Chart","ChartJS","Title","Tooltip","Legend","BarElement","CategoryScale","LinearScale","onMounted","onUnmounted","ref","Bar","api","create","baseURL","headers","props","__props","mySurvey","data","register","value","surveyResponse","get","params","_id","labels","map","s","type","datasets","label","backgroundColor","average","options"],"sources":["D:/au_dev/client/src/components/StudentSurveyStat.vue"],"sourcesContent":["<template>\r\n    <div v-if=\"mySurvey.length\">\r\n        <Bar :data=\"data\" :options=\"options\" />\r\n    </div>\r\n    <div  v-else>\r\n        <h4>No data available!</h4>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport axios from 'axios';\r\nimport {\r\n    Chart as ChartJS,\r\n    Title,\r\n    Tooltip,\r\n    Legend,\r\n    BarElement,\r\n    CategoryScale,\r\n    LinearScale\r\n} from 'chart.js'\r\nimport { onMounted, onUnmounted, ref } from 'vue'\r\nimport { Bar } from 'vue-chartjs'\r\n\r\n// Create axios instance with correct base URL\r\nconst api = axios.create({\r\n    baseURL: 'http://localhost:8081/api',\r\n    headers: {\r\n        'Content-Type': 'application/json'\r\n    }\r\n});\r\n\r\nconst props = defineProps({\r\n    _id: String,\r\n    surveyForm : Array\r\n})\r\nconst mySurvey = ref([]);\r\nconst data = ref({})\r\n\r\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend)\r\nonUnmounted(() => {\r\n    mySurvey.value = [];\r\n    data.value = {};\r\n})\r\nonMounted(async () => {\r\n    const surveyResponse = await api.get(`/survey/stats`,{\r\n        params: {\r\n            _id : props._id\r\n        }\r\n    })\r\n    \r\n    mySurvey.value = surveyResponse.data;\r\n    data.value = {\r\n        labels: mySurvey.value?.map(s => s.type + ' Problem') || 'Not available',\r\n        datasets: [\r\n            {\r\n                label: 'Average Score Survey',\r\n                backgroundColor: '#f87979',\r\n                data: mySurvey.value?.map(s => s.average) || []\r\n            },\r\n        ]\r\n    }\r\n})\r\n\r\n\r\nconst options = ref({\r\n    //   responsive: true ,\r\n    //   maintainAspectRatio: false\r\n})\r\n\r\n</script>"],"mappings":";;AAUA,OAAOA,KAAK,MAAM,OAAO;AACzB,SACIC,KAAK,IAAIC,OAAO,EAChBC,KAAK,EACLC,OAAO,EACPC,MAAM,EACNC,UAAU,EACVC,aAAa,EACbC,WAAW,QACR,UAAU;AACjB,SAASC,SAAS,EAAEC,WAAW,EAAEC,GAAG,QAAQ,KAAK;AACjD,SAASC,GAAG,QAAQ,aAAa;;AAEjC;;;;;;;;;;;;IACA,MAAMC,GAAG,GAAGb,KAAK,CAACc,MAAM,CAAC;MACrBC,OAAO,EAAE,2BAA2B;MACpCC,OAAO,EAAE;QACL,cAAc,EAAE;MACpB;IACJ,CAAC,CAAC;IAEF,MAAMC,KAAK,GAAGC,OAGZ;IACF,MAAMC,QAAQ,GAAGR,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMS,IAAI,GAAGT,GAAG,CAAC,CAAC,CAAC,CAAC;IAEpBT,OAAO,CAACmB,QAAQ,CAACd,aAAa,EAAEC,WAAW,EAAEF,UAAU,EAAEH,KAAK,EAAEC,OAAO,EAAEC,MAAM,CAAC;IAChFK,WAAW,CAAC,MAAM;MACdS,QAAQ,CAACG,KAAK,GAAG,EAAE;MACnBF,IAAI,CAACE,KAAK,GAAG,CAAC,CAAC;IACnB,CAAC,CAAC;IACFb,SAAS,CAAC,YAAY;MAClB,MAAMc,cAAc,GAAG,MAAMV,GAAG,CAACW,GAAG,CAAC,eAAe,EAAC;QACjDC,MAAM,EAAE;UACJC,GAAG,EAAGT,KAAK,CAACS;QAChB;MACJ,CAAC,CAAC;MAEFP,QAAQ,CAACG,KAAK,GAAGC,cAAc,CAACH,IAAI;MACpCA,IAAI,CAACE,KAAK,GAAG;QACTK,MAAM,EAAER,QAAQ,CAACG,KAAK,EAAEM,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,GAAG,UAAU,CAAC,IAAI,eAAe;QACxEC,QAAQ,EAAE,CACN;UACIC,KAAK,EAAE,sBAAsB;UAC7BC,eAAe,EAAE,SAAS;UAC1Bb,IAAI,EAAED,QAAQ,CAACG,KAAK,EAAEM,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACK,OAAO,CAAC,IAAI;QACjD,CAAC;MAET,CAAC;IACL,CAAC,CAAC;IAGF,MAAMC,OAAO,GAAGxB,GAAG,CAAC;MAChB;MACA;IAAA,CACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}