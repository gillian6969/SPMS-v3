{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport { ref, onMounted, computed, watch, onUnmounted, nextTick } from 'vue';\nimport { useStore } from 'vuex';\nimport Chart from 'chart.js/auto';\nimport axios from 'axios';\nimport moment from 'moment';\n\n// Create axios instance with default config\nconst api = axios.create({\n  baseURL: 'http://localhost:8000/api'\n});\nexport default {\n  name: 'Dashboard',\n  setup() {\n    const store = useStore();\n    const performanceChart = ref(null);\n    const assessmentTypeChart = ref(null);\n    const performanceTrendChart = ref(null);\n    const sectionChart = ref(null);\n    const selectedYear = ref('');\n    const selectedSection = ref('');\n    const selectedSubject = ref('');\n    const dashboardContainer = ref(null);\n    const isLoading = ref(false);\n    const lastUpdate = ref(null);\n    const autoRefreshInterval = ref(null);\n    const sections = ref([]);\n    const subjects = ref([]);\n\n    // Computed properties\n    const isCITHead = computed(() => store.getters.isCITHead);\n    const token = computed(() => store.state.auth.token);\n\n    // Get user name\n    const userName = computed(() => {\n      const user = store.state.auth.user;\n      return user ? user.name || `${user.firstName || ''} ${user.lastName || ''}`.trim() || 'User' : 'User';\n    });\n\n    // Check if filters are active\n    const hasActiveFilters = computed(() => {\n      return Boolean(selectedYear.value || selectedSection.value || selectedSubject.value);\n    });\n\n    // Set auth token for all requests\n    watch(token, newToken => {\n      if (newToken) {\n        api.defaults.headers.common['Authorization'] = `Bearer ${newToken}`;\n      }\n    }, {\n      immediate: true\n    });\n\n    // Dashboard stats\n    const totalStudents = ref(0);\n    const totalTeachers = ref(0);\n    const averageAttendance = ref(0);\n    const averageScore = ref(0);\n    const activeSections = ref(0);\n    const data = ref(null);\n\n    // Computed properties for data availability\n    const hasAttendanceData = computed(() => {\n      if (data.value && data.value.attendanceDistribution) {\n        return data.value.attendanceDistribution.some(val => val > 0);\n      }\n      return false;\n    });\n    const hasScoreData = computed(() => {\n      return data.value?.averageScore > 0;\n    });\n    const hasPerformanceData = computed(() => {\n      // Check if we have any assessment or performance data\n      if (data.value) {\n        // Check for averageScore > 0\n        if (typeof data.value.averageScore === 'number' && data.value.averageScore > 0) {\n          return true;\n        }\n\n        // Check for performance trends\n        if (Array.isArray(data.value.performanceTrends) && data.value.performanceTrends.length > 0) {\n          return true;\n        }\n      }\n      return false;\n    });\n    const hasAssessmentData = computed(() => {\n      if (data.value) {\n        // Check directly in assessmentTypes\n        if (data.value.assessmentTypes) {\n          const assessmentTypes = Object.values(data.value.assessmentTypes);\n          return assessmentTypes.some(type => type.count > 0);\n        }\n\n        // Fallback to assessmentTypeDistribution\n        if (data.value.assessmentTypeDistribution) {\n          return true;\n        }\n      }\n      return false;\n    });\n    const hasSectionData = computed(() => {\n      return data.value?.sections?.length > 0;\n    });\n\n    // Fetch sections and subjects\n    const fetchSectionsAndSubjects = async (year = '') => {\n      try {\n        const response = await api.get('/department/sections-subjects', {\n          params: {\n            year\n          }\n        });\n        if (response.data) {\n          // Extract unique sections and subjects\n          sections.value = response.data.sections || [];\n          subjects.value = response.data.subjects || [];\n        }\n      } catch (error) {\n        console.error('Error fetching sections and subjects:', error);\n        sections.value = [];\n        subjects.value = [];\n      }\n    };\n    const fetchDashboardData = async () => {\n      try {\n        isLoading.value = true;\n        const response = await api.get('/dashboard/stats', {\n          params: {\n            year: selectedYear.value,\n            section: selectedSection.value,\n            subject: selectedSubject.value\n          }\n        });\n        data.value = response.data;\n\n        // Update stats\n        totalStudents.value = data.value.totalStudents || 0;\n        totalTeachers.value = data.value.totalTeachers || 0;\n        averageAttendance.value = data.value.averageAttendance || 0;\n        averageScore.value = data.value.averageScore || 0;\n        activeSections.value = data.value.activeSections || 0;\n\n        // Update charts with new data\n        if (data.value) {\n          updateCharts(data.value);\n        }\n        lastUpdate.value = new Date();\n      } catch (error) {\n        console.error('Failed to fetch dashboard data:', error);\n        if (error.response) {\n          console.error('Error response:', error.response.data);\n        }\n      } finally {\n        isLoading.value = false;\n      }\n    };\n    const updateCharts = data => {\n      updatePerformanceChart(data);\n      updateAssessmentTypeChart(data);\n      updatePerformanceTrendChart(data);\n      updateSectionChart(data);\n    };\n\n    // Initialize dummy data for charts when no data is available\n    const initDummyData = () => {\n      updatePerformanceChart({\n        attendanceDistribution: [0, 0, 0]\n      });\n      updateAssessmentTypeChart({\n        assessmentData: [{\n          type: 'Quiz',\n          averageScore: 0\n        }, {\n          type: 'Activity',\n          averageScore: 0\n        }, {\n          type: 'Performance Task',\n          averageScore: 0\n        }]\n      });\n      updatePerformanceTrendChart([]);\n      updateSectionChart({\n        sections: []\n      });\n    };\n\n    // Format date for display\n    const formatDate = date => {\n      if (!date) return '';\n      return moment(date).format('MMMM D, YYYY h:mm A');\n    };\n\n    // Handle year change\n    const handleYearChange = async () => {\n      selectedSection.value = '';\n      selectedSubject.value = '';\n      if (selectedYear.value) {\n        await fetchSectionsAndSubjects(selectedYear.value);\n      } else {\n        sections.value = [];\n        subjects.value = [];\n      }\n      await fetchDashboardData();\n    };\n\n    // Handle filter change\n    const handleFilterChange = () => {\n      fetchDashboardData();\n    };\n\n    // Clear all filters\n    const clearFilters = () => {\n      selectedYear.value = '';\n      selectedSection.value = '';\n      selectedSubject.value = '';\n      sections.value = [];\n      subjects.value = [];\n      fetchDashboardData();\n    };\n\n    // Get filter display text\n    const getFilterDisplay = () => {\n      const filters = [];\n      if (selectedYear.value) filters.push(selectedYear.value + ' Year');\n      if (selectedSection.value) filters.push(selectedSection.value);\n      if (selectedSubject.value) filters.push(selectedSubject.value);\n      return filters.length > 0 ? filters.join(' - ') : 'Filter View';\n    };\n\n    // Attendance Distribution Chart\n    const updatePerformanceChart = data => {\n      if (!performanceChart.value) return;\n      const ctx = performanceChart.value.getContext('2d');\n      if (!ctx) return;\n      const existingChart = Chart.getChart(ctx);\n      if (existingChart) existingChart.destroy();\n\n      // Get attendance distribution or use default values\n      const attendanceData = data.attendanceDistribution || [0, 0, 0];\n      new Chart(ctx, {\n        type: 'doughnut',\n        data: {\n          labels: ['Present', 'Late', 'Absent'],\n          datasets: [{\n            data: attendanceData,\n            backgroundColor: ['rgba(52, 211, 153, 0.8)',\n            // Green for Present\n            'rgba(251, 191, 36, 0.8)',\n            // Yellow for Late\n            'rgba(239, 68, 68, 0.8)' // Red for Absent\n            ],\n            borderColor: ['rgb(16, 185, 129)', 'rgb(245, 158, 11)', 'rgb(220, 38, 38)'],\n            borderWidth: 1\n          }]\n        },\n        options: {\n          responsive: true,\n          maintainAspectRatio: false,\n          plugins: {\n            legend: {\n              position: 'bottom',\n              labels: {\n                font: {\n                  size: 12\n                },\n                padding: 15\n              }\n            }\n          },\n          cutout: '60%',\n          layout: {\n            padding: 20\n          }\n        }\n      });\n    };\n\n    // Assessment Type Chart\n    const updateAssessmentTypeChart = data => {\n      if (!assessmentTypeChart.value) return;\n      const ctx = assessmentTypeChart.value.getContext('2d');\n      if (!ctx) return;\n      const existingChart = Chart.getChart(ctx);\n      if (existingChart) existingChart.destroy();\n\n      // Process incoming data to restructure it\n      let assessmentData = {};\n      const assessmentTypes = ['Quiz', 'Activity', 'Performance Task'];\n\n      // Initialize default data structure if proper data isn't available\n      if (!data.assessmentData || !Array.isArray(data.assessmentData) || data.assessmentData.length === 0) {\n        // Sample data structure for fallback\n        assessmentData = {\n          assessmentTypes: assessmentTypes,\n          averageScores: {},\n          totalCounts: {}\n        };\n        assessmentTypes.forEach(type => {\n          assessmentData.averageScores[type] = 0;\n          assessmentData.totalCounts[type] = 0;\n        });\n      } else {\n        // Process actual data\n        assessmentData = {\n          assessmentTypes: assessmentTypes,\n          averageScores: {},\n          totalCounts: {}\n        };\n\n        // Calculate average scores per assessment type\n        assessmentTypes.forEach(type => {\n          const typeAssessments = data.assessmentData.filter(a => a.type === type);\n          const totalCount = typeAssessments.length;\n\n          // Get the count from the first matching assessment if available\n          const firstMatch = typeAssessments[0];\n          assessmentData.totalCounts[type] = firstMatch && typeof firstMatch.count === 'number' ? firstMatch.count : totalCount;\n          if (totalCount > 0) {\n            // Calculate average score\n            const totalScore = typeAssessments.reduce((sum, a) => sum + (parseFloat(a.averageScore) || 0), 0);\n            assessmentData.averageScores[type] = (totalScore / totalCount).toFixed(1);\n          } else {\n            assessmentData.averageScores[type] = 0;\n          }\n        });\n      }\n\n      // Create a simple bar chart showing average scores\n      new Chart(ctx, {\n        type: 'bar',\n        data: {\n          labels: assessmentTypes,\n          datasets: [{\n            label: 'Average Score (%)',\n            data: assessmentTypes.map(type => assessmentData.averageScores[type]),\n            backgroundColor: ['rgba(52, 211, 153, 0.8)',\n            // Green for Quiz\n            'rgba(59, 130, 246, 0.8)',\n            // Blue for Activity\n            'rgba(251, 191, 36, 0.8)' // Yellow for Performance Task\n            ],\n            borderColor: ['rgb(15, 140, 80)', 'rgb(45, 110, 220)', 'rgb(220, 160, 20)'],\n            borderWidth: 1,\n            borderRadius: 6,\n            barPercentage: 0.6\n          }]\n        },\n        options: {\n          responsive: true,\n          maintainAspectRatio: false,\n          scales: {\n            y: {\n              beginAtZero: true,\n              max: 100,\n              grid: {\n                color: 'rgba(0, 0, 0, 0.05)'\n              },\n              title: {\n                display: true,\n                text: 'Average Score (%)',\n                font: {\n                  size: 14,\n                  weight: 'bold'\n                }\n              },\n              ticks: {\n                font: {\n                  size: 12\n                }\n              }\n            },\n            x: {\n              grid: {\n                display: false\n              }\n            }\n          },\n          plugins: {\n            legend: {\n              display: false\n            }\n          }\n        }\n      });\n    };\n\n    // Performance Trend Chart\n    const updatePerformanceTrendChart = data => {\n      if (!performanceTrendChart.value) return;\n      const ctx = performanceTrendChart.value.getContext('2d');\n      if (!ctx) return;\n      const existingChart = Chart.getChart(ctx);\n      if (existingChart) existingChart.destroy();\n\n      // Check and normalize data\n      let performanceTrends = [];\n      if (data.performanceTrends && Array.isArray(data.performanceTrends)) {\n        performanceTrends = data.performanceTrends.slice(0, 10); // Take last 10 assessments\n      }\n\n      // Sort by date (oldest first for chronological order)\n      performanceTrends.sort((a, b) => new Date(a.date) - new Date(b.date));\n\n      // Format dates and handle missing data\n      const labels = performanceTrends.map(item => {\n        const date = new Date(item.date);\n        return `${date.getMonth() + 1}/${date.getDate()}`;\n      });\n      const scoreData = performanceTrends.map(item => item.score);\n      new Chart(ctx, {\n        type: 'line',\n        data: {\n          labels: labels,\n          datasets: [{\n            label: 'Average Score (%)',\n            data: scoreData,\n            borderColor: 'rgb(59, 130, 246)',\n            backgroundColor: 'rgba(59, 130, 246, 0.1)',\n            tension: 0.3,\n            fill: true,\n            pointBackgroundColor: 'rgb(59, 130, 246)',\n            pointBorderColor: '#fff',\n            pointBorderWidth: 2,\n            pointRadius: 4,\n            pointHoverRadius: 6\n          }]\n        },\n        options: {\n          responsive: true,\n          maintainAspectRatio: false,\n          scales: {\n            y: {\n              beginAtZero: true,\n              max: 100,\n              grid: {\n                color: 'rgba(0, 0, 0, 0.05)'\n              },\n              title: {\n                display: true,\n                text: 'Score (%)',\n                font: {\n                  size: 14,\n                  weight: 'bold'\n                }\n              }\n            },\n            x: {\n              grid: {\n                display: false\n              }\n            }\n          },\n          plugins: {\n            legend: {\n              position: 'top',\n              align: 'end',\n              labels: {\n                boxWidth: 10,\n                usePointStyle: true,\n                pointStyle: 'circle'\n              }\n            },\n            tooltip: {\n              callbacks: {\n                label: context => {\n                  return `Score: ${context.parsed.y}%`;\n                }\n              }\n            }\n          }\n        }\n      });\n    };\n\n    // Section Performance Chart (Keep this chart from the original Dashboard)\n    const updateSectionChart = data => {\n      if (!sectionChart.value) return;\n      const ctx = sectionChart.value.getContext('2d');\n      if (!ctx) return;\n      const existingChart = Chart.getChart(ctx);\n      if (existingChart) existingChart.destroy();\n\n      // Check if there is section data\n      if (!data.sections || !Array.isArray(data.sections) || data.sections.length === 0) {\n        // Draw empty chart with message\n        new Chart(ctx, {\n          type: 'bar',\n          data: {\n            labels: ['No Data'],\n            datasets: [{\n              data: [0],\n              backgroundColor: 'rgba(229, 231, 235, 0.5)',\n              borderColor: 'rgb(209, 213, 219)',\n              borderWidth: 1\n            }]\n          },\n          options: {\n            responsive: true,\n            maintainAspectRatio: false,\n            scales: {\n              y: {\n                beginAtZero: true,\n                max: 100\n              }\n            },\n            plugins: {\n              legend: {\n                display: false\n              }\n            }\n          }\n        });\n        return;\n      }\n\n      // Process section data\n      const labels = data.sections.map(section => section.name);\n      const scoreData = data.sections.map(section => section.averageScore);\n      const attendanceData = data.sections.map(section => section.attendanceRate);\n\n      // Create multi-dataset bar chart\n      new Chart(ctx, {\n        type: 'bar',\n        data: {\n          labels: labels,\n          datasets: [{\n            label: 'Average Score',\n            data: scoreData,\n            backgroundColor: 'rgba(59, 130, 246, 0.6)',\n            borderColor: 'rgb(37, 99, 235)',\n            borderWidth: 1,\n            borderRadius: 4,\n            barPercentage: 0.6,\n            categoryPercentage: 0.7\n          }, {\n            label: 'Attendance Rate',\n            data: attendanceData,\n            backgroundColor: 'rgba(52, 211, 153, 0.6)',\n            borderColor: 'rgb(16, 185, 129)',\n            borderWidth: 1,\n            borderRadius: 4,\n            barPercentage: 0.6,\n            categoryPercentage: 0.7\n          }]\n        },\n        options: {\n          responsive: true,\n          maintainAspectRatio: false,\n          scales: {\n            y: {\n              beginAtZero: true,\n              max: 100,\n              grid: {\n                color: 'rgba(0, 0, 0, 0.05)'\n              },\n              title: {\n                display: true,\n                text: 'Percentage (%)',\n                font: {\n                  size: 14,\n                  weight: 'bold'\n                }\n              }\n            },\n            x: {\n              grid: {\n                display: false\n              }\n            }\n          },\n          plugins: {\n            legend: {\n              position: 'top',\n              align: 'end',\n              labels: {\n                boxWidth: 12,\n                usePointStyle: true,\n                pointStyle: 'circle'\n              }\n            },\n            tooltip: {\n              callbacks: {\n                label: function (context) {\n                  return `${context.dataset.label}: ${context.parsed.y}%`;\n                }\n              }\n            }\n          }\n        }\n      });\n    };\n    const refreshDashboard = () => {\n      fetchDashboardData();\n    };\n    const scrollToSection = sectionId => {\n      const section = document.getElementById(sectionId);\n      if (section) {\n        section.scrollIntoView({\n          behavior: 'smooth'\n        });\n      }\n    };\n\n    // Auto-refresh logic\n    const setupAutoRefresh = () => {\n      // Clear any existing interval\n      if (autoRefreshInterval.value) {\n        clearInterval(autoRefreshInterval.value);\n      }\n\n      // Set new interval (every 5 minutes)\n      autoRefreshInterval.value = setInterval(() => {\n        fetchDashboardData();\n      }, 5 * 60 * 1000);\n    };\n\n    // Fetch data on component mount\n    onMounted(() => {\n      fetchDashboardData();\n      setupAutoRefresh();\n\n      // Initialize with dummy data while loading\n      nextTick(() => {\n        initDummyData();\n      });\n    });\n\n    // Clean up on component unmount\n    onUnmounted(() => {\n      if (autoRefreshInterval.value) {\n        clearInterval(autoRefreshInterval.value);\n      }\n    });\n    return {\n      performanceChart,\n      assessmentTypeChart,\n      performanceTrendChart,\n      sectionChart,\n      selectedYear,\n      selectedSection,\n      selectedSubject,\n      sections,\n      subjects,\n      isCITHead,\n      userName,\n      hasActiveFilters,\n      totalStudents,\n      totalTeachers,\n      averageAttendance,\n      averageScore,\n      activeSections,\n      hasAttendanceData,\n      hasScoreData,\n      hasPerformanceData,\n      hasAssessmentData,\n      hasSectionData,\n      dashboardContainer,\n      isLoading,\n      lastUpdate,\n      formatDate,\n      scrollToSection,\n      handleYearChange,\n      handleFilterChange,\n      clearFilters,\n      getFilterDisplay,\n      refreshDashboard\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","watch","onUnmounted","nextTick","useStore","Chart","axios","moment","api","create","baseURL","name","setup","store","performanceChart","assessmentTypeChart","performanceTrendChart","sectionChart","selectedYear","selectedSection","selectedSubject","dashboardContainer","isLoading","lastUpdate","autoRefreshInterval","sections","subjects","isCITHead","getters","token","state","auth","userName","user","firstName","lastName","trim","hasActiveFilters","Boolean","value","newToken","defaults","headers","common","immediate","totalStudents","totalTeachers","averageAttendance","averageScore","activeSections","data","hasAttendanceData","attendanceDistribution","some","val","hasScoreData","hasPerformanceData","Array","isArray","performanceTrends","length","hasAssessmentData","assessmentTypes","Object","values","type","count","assessmentTypeDistribution","hasSectionData","fetchSectionsAndSubjects","year","response","get","params","error","console","fetchDashboardData","section","subject","updateCharts","Date","updatePerformanceChart","updateAssessmentTypeChart","updatePerformanceTrendChart","updateSectionChart","initDummyData","assessmentData","formatDate","date","format","handleYearChange","handleFilterChange","clearFilters","getFilterDisplay","filters","push","join","ctx","getContext","existingChart","getChart","destroy","attendanceData","labels","datasets","backgroundColor","borderColor","borderWidth","options","responsive","maintainAspectRatio","plugins","legend","position","font","size","padding","cutout","layout","averageScores","totalCounts","forEach","typeAssessments","filter","a","totalCount","firstMatch","totalScore","reduce","sum","parseFloat","toFixed","label","map","borderRadius","barPercentage","scales","y","beginAtZero","max","grid","color","title","display","text","weight","ticks","x","slice","sort","b","item","getMonth","getDate","scoreData","score","tension","fill","pointBackgroundColor","pointBorderColor","pointBorderWidth","pointRadius","pointHoverRadius","align","boxWidth","usePointStyle","pointStyle","tooltip","callbacks","context","parsed","attendanceRate","categoryPercentage","dataset","refreshDashboard","scrollToSection","sectionId","document","getElementById","scrollIntoView","behavior","setupAutoRefresh","clearInterval","setInterval"],"sources":["D:\\au_dev\\client\\src\\views\\Dashboard.vue"],"sourcesContent":["<template>\n  <div class=\"dashboard\" ref=\"dashboardContainer\">\n    <!-- Welcome Header & Filter Section -->\n    <div class=\"welcome-section mb-4\">\n      <h2 class=\"welcome-title\">\n        <i class=\"fas fa-graduation-cap me-2\"></i> Welcome, Dean {{ userName }}\n      </h2>\n      <p class=\"welcome-subtitle\">Computer and Information Technology Department Dashboard</p>\n    </div>\n\n    <!-- Year Filter -->\n    <div class=\"filter-section mb-4\">\n      <div class=\"d-flex flex-wrap justify-content-between align-items-center\">\n        <div class=\"d-flex gap-3 align-items-center filter-controls\">\n          <!-- Year Filter -->\n        <div class=\"filter-group\">\n          <select class=\"form-select\" v-model=\"selectedYear\" @change=\"handleYearChange\">\n            <option value=\"\">All Academic Years</option>\n            <option value=\"1st\">1st Year</option>\n            <option value=\"2nd\">2nd Year</option>\n            <option value=\"3rd\">3rd Year</option>\n            <option value=\"4th\">4th Year</option>\n          </select>\n        </div>\n          \n          <!-- Section Filter -->\n          <div class=\"filter-group\" v-if=\"selectedYear\">\n            <select class=\"form-select\" v-model=\"selectedSection\" @change=\"handleFilterChange\">\n              <option value=\"\">All Sections</option>\n              <option v-for=\"section in sections\" :key=\"section\" :value=\"section\">{{ section }}</option>\n            </select>\n          </div>\n          \n          <!-- Subject Filter -->\n          <div class=\"filter-group\" v-if=\"selectedYear\">\n            <select class=\"form-select\" v-model=\"selectedSubject\" @change=\"handleFilterChange\">\n              <option value=\"\">All Subjects</option>\n              <option v-for=\"subject in subjects\" :key=\"subject\" :value=\"subject\">{{ subject }}</option>\n            </select>\n          </div>\n          \n          <button class=\"btn btn-refresh\" @click=\"refreshDashboard\" title=\"Refresh Dashboard\">\n          <i class=\"fas fa-sync-alt\"></i>\n        </button>\n        </div>\n        \n        <!-- Filter Pills -->\n        <div class=\"active-filters\" v-if=\"hasActiveFilters\">\n          <div class=\"filter-pill\">\n            <span>{{ getFilterDisplay() }}</span>\n            <button @click=\"clearFilters\" title=\"Clear Filters\">\n              <i class=\"fas fa-times\"></i>\n            </button>\n          </div>\n        </div>\n      </div>\n      \n      <!-- Last update info -->\n      <div class=\"last-update\" v-if=\"lastUpdate\">\n        Last updated: {{ formatDate(lastUpdate) }}\n      </div>\n    </div>\n\n    <!-- Analytics Cards -->\n    <div id=\"analytics\" class=\"analytics-grid mb-4\">\n      <div class=\"stat-card\">\n        <div class=\"stat-icon\">\n          <i class=\"fas fa-user-graduate\"></i>\n        </div>\n        <div class=\"stat-content\">\n          <h3 class=\"stat-value\">{{ totalStudents }}</h3>\n          <p class=\"stat-label\">Total Students</p>\n        </div>\n      </div>\n      <div class=\"stat-card\">\n        <div class=\"stat-icon\">\n          <i class=\"fas fa-chalkboard-teacher\"></i>\n        </div>\n        <div class=\"stat-content\">\n          <h3 class=\"stat-value\">{{ totalTeachers }}</h3>\n          <p class=\"stat-label\">Total Teachers</p>\n        </div>\n      </div>\n      <div class=\"stat-card\">\n        <div class=\"stat-icon\">\n          <i class=\"fas fa-users\"></i>\n        </div>\n        <div class=\"stat-content\">\n          <h3 class=\"stat-value\">{{ activeSections }}</h3>\n          <p class=\"stat-label\">Active Sections</p>\n        </div>\n      </div>\n    </div>\n\n    <!-- Performance Stats -->\n    <div class=\"performance-grid mb-4\">\n      <div class=\"stat-card\">\n        <div class=\"stat-icon\">\n          <i class=\"fas fa-clock\"></i>\n        </div>\n        <div class=\"stat-content\">\n          <h3 class=\"stat-value\" v-if=\"hasAttendanceData\">{{ averageAttendance }}%</h3>\n          <p class=\"stat-label\">Average Attendance</p>\n          <p v-if=\"!hasAttendanceData\" class=\"no-data\">No data available</p>\n        </div>\n      </div>\n      <div class=\"stat-card\">\n        <div class=\"stat-icon\">\n          <i class=\"fas fa-chart-line\"></i>\n        </div>\n        <div class=\"stat-content\">\n          <h3 class=\"stat-value\" v-if=\"hasScoreData\">{{ averageScore }}%</h3>\n          <p class=\"stat-label\">Average Score</p>\n          <p v-if=\"!hasScoreData\" class=\"no-data\">No data available</p>\n        </div>\n      </div>\n    </div>\n\n    <!-- Charts Row -->\n    <div class=\"charts-grid mb-4\">\n      <!-- Attendance Distribution Chart -->\n      <div class=\"chart-card\">\n        <h5 class=\"chart-title\">\n          <i class=\"fas fa-calendar-check me-2\"></i>\n          Attendance Distribution\n        </h5>\n        <p class=\"chart-description\">Breakdown of student attendance patterns</p>\n        <div class=\"chart-container\">\n          <div v-if=\"isLoading\" class=\"loading-overlay\">\n            <i class=\"fas fa-spinner fa-spin\"></i>\n            <p>Loading chart data...</p>\n          </div>\n          <canvas ref=\"performanceChart\"></canvas>\n          <p v-if=\"!hasAttendanceData && !isLoading\" class=\"no-data-message\">No attendance data available</p>\n        </div>\n      </div>\n      \n      <!-- Assessment Type Distribution -->\n      <div class=\"chart-card\">\n        <h5 class=\"chart-title\">\n          <i class=\"fas fa-tasks me-2\"></i>\n          Assessment Performance Analysis\n        </h5>\n        <p class=\"chart-description\">Average scores by assessment type</p>\n        <div class=\"chart-container\">\n          <div v-if=\"isLoading\" class=\"loading-overlay\">\n            <i class=\"fas fa-spinner fa-spin\"></i>\n            <p>Loading chart data...</p>\n          </div>\n          <canvas ref=\"assessmentTypeChart\"></canvas>\n          <p v-if=\"!hasAssessmentData && !isLoading\" class=\"no-data-message\">No assessment data available</p>\n        </div>\n      </div>\n    </div>\n\n    <!-- Performance Trend & Section Performance -->\n    <div class=\"charts-grid mb-4\">\n      <!-- Performance Trend Chart -->\n      <div class=\"chart-card\">\n        <h5 class=\"chart-title\">\n          <i class=\"fas fa-chart-line me-2\"></i>\n          Performance Trends Over Time\n        </h5>\n        <p class=\"chart-description\">Department average scores across recent assessments</p>\n      <div class=\"chart-container\">\n          <div v-if=\"isLoading\" class=\"loading-overlay\">\n            <i class=\"fas fa-spinner fa-spin\"></i>\n            <p>Loading chart data...</p>\n          </div>\n          <canvas ref=\"performanceTrendChart\"></canvas>\n          <p v-if=\"!hasPerformanceData && !isLoading\" class=\"no-data-message\">No performance data available</p>\n      </div>\n    </div>\n\n    <!-- Section Performance -->\n    <div class=\"chart-card\">\n        <h5 class=\"chart-title\">\n          <i class=\"fas fa-users me-2\"></i>\n          Section Performance\n        </h5>\n        <p class=\"chart-description\">Comparison of performance across different sections</p>\n      <div class=\"chart-container\">\n          <div v-if=\"isLoading\" class=\"loading-overlay\">\n            <i class=\"fas fa-spinner fa-spin\"></i>\n            <p>Loading chart data...</p>\n          </div>\n        <canvas ref=\"sectionChart\"></canvas>\n          <p v-if=\"!hasSectionData && !isLoading\" class=\"no-data-message\">No section data available</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted, computed, watch, onUnmounted, nextTick } from 'vue'\nimport { useStore } from 'vuex'\nimport Chart from 'chart.js/auto'\nimport axios from 'axios'\nimport moment from 'moment'\n\n// Create axios instance with default config\nconst api = axios.create({\n  baseURL: 'http://localhost:8000/api'\n});\n\nexport default {\n  name: 'Dashboard',\n  setup() {\n    const store = useStore()\n    const performanceChart = ref(null)\n    const assessmentTypeChart = ref(null)\n    const performanceTrendChart = ref(null)\n    const sectionChart = ref(null)\n    const selectedYear = ref('')\n    const selectedSection = ref('')\n    const selectedSubject = ref('')\n    const dashboardContainer = ref(null)\n    const isLoading = ref(false)\n    const lastUpdate = ref(null)\n    const autoRefreshInterval = ref(null)\n    const sections = ref([])\n    const subjects = ref([])\n\n    // Computed properties\n    const isCITHead = computed(() => store.getters.isCITHead)\n    const token = computed(() => store.state.auth.token)\n    \n    // Get user name\n    const userName = computed(() => {\n      const user = store.state.auth.user;\n      return user ? user.name || `${user.firstName || ''} ${user.lastName || ''}`.trim() || 'User' : 'User';\n    });\n    \n    // Check if filters are active\n    const hasActiveFilters = computed(() => {\n      return Boolean(selectedYear.value || selectedSection.value || selectedSubject.value);\n    });\n\n    // Set auth token for all requests\n    watch(token, (newToken) => {\n      if (newToken) {\n        api.defaults.headers.common['Authorization'] = `Bearer ${newToken}`;\n      }\n    }, { immediate: true });\n\n    // Dashboard stats\n    const totalStudents = ref(0)\n    const totalTeachers = ref(0)\n    const averageAttendance = ref(0)\n    const averageScore = ref(0)\n    const activeSections = ref(0)\n    const data = ref(null)\n\n    // Computed properties for data availability\n    const hasAttendanceData = computed(() => {\n      if (data.value && data.value.attendanceDistribution) {\n        return data.value.attendanceDistribution.some(val => val > 0);\n      }\n      return false;\n    });\n\n    const hasScoreData = computed(() => {\n      return data.value?.averageScore > 0;\n    });\n\n    const hasPerformanceData = computed(() => {\n      // Check if we have any assessment or performance data\n      if (data.value) {\n        // Check for averageScore > 0\n        if (typeof data.value.averageScore === 'number' && data.value.averageScore > 0) {\n          return true;\n        }\n        \n        // Check for performance trends\n        if (Array.isArray(data.value.performanceTrends) && data.value.performanceTrends.length > 0) {\n          return true;\n        }\n      }\n      return false;\n    });\n\n    const hasAssessmentData = computed(() => {\n      if (data.value) {\n        // Check directly in assessmentTypes\n        if (data.value.assessmentTypes) {\n          const assessmentTypes = Object.values(data.value.assessmentTypes);\n          return assessmentTypes.some(type => type.count > 0);\n        }\n        \n        // Fallback to assessmentTypeDistribution\n        if (data.value.assessmentTypeDistribution) {\n          return true;\n        }\n      }\n      return false;\n    });\n\n    const hasSectionData = computed(() => {\n      return data.value?.sections?.length > 0;\n    });\n\n    // Fetch sections and subjects\n    const fetchSectionsAndSubjects = async (year = '') => {\n      try {\n        const response = await api.get('/department/sections-subjects', {\n          params: { year }\n        });\n        \n        if (response.data) {\n          // Extract unique sections and subjects\n          sections.value = response.data.sections || [];\n          subjects.value = response.data.subjects || [];\n        }\n      } catch (error) {\n        console.error('Error fetching sections and subjects:', error);\n        sections.value = [];\n        subjects.value = [];\n      }\n    };\n\n    const fetchDashboardData = async () => {\n      try {\n        isLoading.value = true;\n        const response = await api.get('/dashboard/stats', {\n          params: {\n            year: selectedYear.value,\n            section: selectedSection.value,\n            subject: selectedSubject.value\n          }\n        });\n\n        data.value = response.data;\n        \n        // Update stats\n        totalStudents.value = data.value.totalStudents || 0;\n        totalTeachers.value = data.value.totalTeachers || 0;\n        averageAttendance.value = data.value.averageAttendance || 0;\n        averageScore.value = data.value.averageScore || 0;\n        activeSections.value = data.value.activeSections || 0;\n\n        // Update charts with new data\n        if (data.value) {\n          updateCharts(data.value);\n        }\n        \n        lastUpdate.value = new Date();\n      } catch (error) {\n        console.error('Failed to fetch dashboard data:', error);\n        if (error.response) {\n          console.error('Error response:', error.response.data);\n        }\n      } finally {\n        isLoading.value = false;\n      }\n    };\n\n    const updateCharts = (data) => {\n      updatePerformanceChart(data);\n      updateAssessmentTypeChart(data);\n      updatePerformanceTrendChart(data);\n      updateSectionChart(data);\n    };\n\n    // Initialize dummy data for charts when no data is available\n    const initDummyData = () => {\n      updatePerformanceChart({\n        attendanceDistribution: [0, 0, 0]\n      });\n      \n      updateAssessmentTypeChart({\n        assessmentData: [\n          { type: 'Quiz', averageScore: 0 },\n          { type: 'Activity', averageScore: 0 },\n          { type: 'Performance Task', averageScore: 0 }\n        ]\n      });\n      \n      updatePerformanceTrendChart([]);\n      updateSectionChart({ sections: [] });\n    };\n\n    // Format date for display\n    const formatDate = (date) => {\n      if (!date) return '';\n      return moment(date).format('MMMM D, YYYY h:mm A');\n    };\n\n    // Handle year change\n    const handleYearChange = async () => {\n      selectedSection.value = '';\n      selectedSubject.value = '';\n      \n      if (selectedYear.value) {\n        await fetchSectionsAndSubjects(selectedYear.value);\n      } else {\n        sections.value = [];\n        subjects.value = [];\n      }\n      \n      await fetchDashboardData();\n    };\n\n    // Handle filter change\n    const handleFilterChange = () => {\n      fetchDashboardData();\n    };\n\n    // Clear all filters\n    const clearFilters = () => {\n      selectedYear.value = '';\n      selectedSection.value = '';\n      selectedSubject.value = '';\n      sections.value = [];\n      subjects.value = [];\n      fetchDashboardData();\n    };\n\n    // Get filter display text\n    const getFilterDisplay = () => {\n      const filters = [];\n      if (selectedYear.value) filters.push(selectedYear.value + ' Year');\n      if (selectedSection.value) filters.push(selectedSection.value);\n      if (selectedSubject.value) filters.push(selectedSubject.value);\n      return filters.length > 0 ? filters.join(' - ') : 'Filter View';\n    };\n\n    // Attendance Distribution Chart\n    const updatePerformanceChart = (data) => {\n      if (!performanceChart.value) return;\n\n      const ctx = performanceChart.value.getContext('2d');\n      if (!ctx) return;\n\n      const existingChart = Chart.getChart(ctx);\n      if (existingChart) existingChart.destroy();\n\n      // Get attendance distribution or use default values\n      const attendanceData = data.attendanceDistribution || [0, 0, 0];\n\n      new Chart(ctx, {\n        type: 'doughnut',\n          data: {\n          labels: ['Present', 'Late', 'Absent'],\n            datasets: [{\n            data: attendanceData,\n              backgroundColor: [\n              'rgba(52, 211, 153, 0.8)',  // Green for Present\n              'rgba(251, 191, 36, 0.8)',  // Yellow for Late\n              'rgba(239, 68, 68, 0.8)',   // Red for Absent\n            ],\n            borderColor: [\n              'rgb(16, 185, 129)',\n              'rgb(245, 158, 11)',\n              'rgb(220, 38, 38)',\n            ],\n            borderWidth: 1\n            }]\n          },\n          options: {\n            responsive: true,\n            maintainAspectRatio: false,\n            plugins: {\n              legend: {\n              position: 'bottom',\n                labels: {\n                font: {\n                  size: 12\n                },\n                padding: 15\n              }\n            }\n          },\n          cutout: '60%',\n          layout: {\n            padding: 20\n          }\n        }\n      });\n    };\n\n    // Assessment Type Chart\n    const updateAssessmentTypeChart = (data) => {\n      if (!assessmentTypeChart.value) return;\n      \n      const ctx = assessmentTypeChart.value.getContext('2d');\n      if (!ctx) return;\n\n      const existingChart = Chart.getChart(ctx);\n      if (existingChart) existingChart.destroy();\n\n      // Process incoming data to restructure it\n      let assessmentData = {};\n      const assessmentTypes = ['Quiz', 'Activity', 'Performance Task'];\n      \n      // Initialize default data structure if proper data isn't available\n      if (!data.assessmentData || !Array.isArray(data.assessmentData) || data.assessmentData.length === 0) {\n        // Sample data structure for fallback\n        assessmentData = {\n          assessmentTypes: assessmentTypes,\n          averageScores: {},\n          totalCounts: {}\n        };\n        \n        assessmentTypes.forEach(type => {\n          assessmentData.averageScores[type] = 0;\n          assessmentData.totalCounts[type] = 0;\n        });\n      } else {\n        // Process actual data\n        assessmentData = {\n          assessmentTypes: assessmentTypes,\n          averageScores: {},\n          totalCounts: {}\n        };\n        \n        // Calculate average scores per assessment type\n        assessmentTypes.forEach(type => {\n          const typeAssessments = data.assessmentData.filter(a => a.type === type);\n          const totalCount = typeAssessments.length;\n          \n          // Get the count from the first matching assessment if available\n          const firstMatch = typeAssessments[0];\n          assessmentData.totalCounts[type] = firstMatch && typeof firstMatch.count === 'number' ? firstMatch.count : totalCount;\n          \n          if (totalCount > 0) {\n            // Calculate average score\n            const totalScore = typeAssessments.reduce((sum, a) => sum + (parseFloat(a.averageScore) || 0), 0);\n            assessmentData.averageScores[type] = (totalScore / totalCount).toFixed(1);\n          } else {\n            assessmentData.averageScores[type] = 0;\n          }\n        });\n      }\n      \n      // Create a simple bar chart showing average scores\n      new Chart(ctx, {\n        type: 'bar',\n        data: {\n          labels: assessmentTypes,\n          datasets: [\n            {\n              label: 'Average Score (%)',\n              data: assessmentTypes.map(type => assessmentData.averageScores[type]),\n              backgroundColor: [\n                'rgba(52, 211, 153, 0.8)',  // Green for Quiz\n                'rgba(59, 130, 246, 0.8)',  // Blue for Activity\n                'rgba(251, 191, 36, 0.8)',  // Yellow for Performance Task\n              ],\n              borderColor: [\n                'rgb(15, 140, 80)',\n                'rgb(45, 110, 220)',\n                'rgb(220, 160, 20)',\n              ],\n              borderWidth: 1,\n              borderRadius: 6,\n              barPercentage: 0.6\n            }\n          ]\n        },\n        options: {\n          responsive: true,\n          maintainAspectRatio: false,\n          scales: {\n            y: {\n              beginAtZero: true,\n              max: 100,\n              grid: {\n                color: 'rgba(0, 0, 0, 0.05)'\n              },\n              title: {\n                display: true,\n                text: 'Average Score (%)',\n                font: {\n                  size: 14,\n                  weight: 'bold'\n                }\n              },\n              ticks: {\n                font: {\n                  size: 12\n                }\n              }\n            },\n            x: {\n              grid: {\n                display: false\n              }\n            }\n          },\n          plugins: {\n            legend: {\n              display: false\n              }\n            }\n          }\n        });\n    };\n\n    // Performance Trend Chart\n    const updatePerformanceTrendChart = (data) => {\n      if (!performanceTrendChart.value) return;\n      \n      const ctx = performanceTrendChart.value.getContext('2d');\n      if (!ctx) return;\n\n      const existingChart = Chart.getChart(ctx);\n      if (existingChart) existingChart.destroy();\n\n      // Check and normalize data\n      let performanceTrends = [];\n      if (data.performanceTrends && Array.isArray(data.performanceTrends)) {\n        performanceTrends = data.performanceTrends.slice(0, 10);  // Take last 10 assessments\n      }\n\n      // Sort by date (oldest first for chronological order)\n      performanceTrends.sort((a, b) => new Date(a.date) - new Date(b.date));\n\n      // Format dates and handle missing data\n      const labels = performanceTrends.map(item => {\n        const date = new Date(item.date);\n        return `${date.getMonth() + 1}/${date.getDate()}`;\n      });\n      \n      const scoreData = performanceTrends.map(item => item.score);\n\n      new Chart(ctx, {\n        type: 'line',\n        data: {\n          labels: labels,\n          datasets: [\n            {\n              label: 'Average Score (%)',\n              data: scoreData,\n              borderColor: 'rgb(59, 130, 246)',\n              backgroundColor: 'rgba(59, 130, 246, 0.1)',\n              tension: 0.3,\n          fill: true,\n              pointBackgroundColor: 'rgb(59, 130, 246)',\n          pointBorderColor: '#fff',\n          pointBorderWidth: 2,\n          pointRadius: 4,\n          pointHoverRadius: 6\n            }\n          ]\n          },\n          options: {\n            responsive: true,\n            maintainAspectRatio: false,\n            scales: {\n              y: {\n                beginAtZero: true,\n              max: 100,\n              grid: {\n                color: 'rgba(0, 0, 0, 0.05)'\n              },\n                title: {\n                  display: true,\n                text: 'Score (%)',\n                font: {\n                  size: 14,\n                  weight: 'bold'\n                }\n              }\n            },\n            x: {\n                grid: {\n                display: false\n                }\n              }\n            },\n            plugins: {\n              legend: {\n                position: 'top',\n              align: 'end',\n                labels: {\n                boxWidth: 10,\n                  usePointStyle: true,\n                pointStyle: 'circle'\n                }\n              },\n              tooltip: {\n                callbacks: {\n                label: (context) => {\n                  return `Score: ${context.parsed.y}%`;\n                  }\n                }\n              }\n            }\n          }\n        });\n    };\n\n    // Section Performance Chart (Keep this chart from the original Dashboard)\n    const updateSectionChart = (data) => {\n      if (!sectionChart.value) return;\n      \n      const ctx = sectionChart.value.getContext('2d');\n      if (!ctx) return;\n\n      const existingChart = Chart.getChart(ctx);\n      if (existingChart) existingChart.destroy();\n\n      // Check if there is section data\n      if (!data.sections || !Array.isArray(data.sections) || data.sections.length === 0) {\n        // Draw empty chart with message\n        new Chart(ctx, {\n          type: 'bar',\n          data: {\n            labels: ['No Data'],\n            datasets: [{\n              data: [0],\n              backgroundColor: 'rgba(229, 231, 235, 0.5)',\n              borderColor: 'rgb(209, 213, 219)',\n              borderWidth: 1\n            }]\n          },\n          options: {\n            responsive: true,\n            maintainAspectRatio: false,\n            scales: {\n              y: {\n                beginAtZero: true,\n                max: 100\n              }\n            },\n            plugins: {\n              legend: {\n                display: false\n              }\n            }\n          }\n        });\n        return;\n      }\n\n      // Process section data\n      const labels = data.sections.map(section => section.name);\n      const scoreData = data.sections.map(section => section.averageScore);\n      const attendanceData = data.sections.map(section => section.attendanceRate);\n      \n      // Create multi-dataset bar chart\n      new Chart(ctx, {\n          type: 'bar',\n          data: {\n          labels: labels,\n          datasets: [\n            {\n              label: 'Average Score',\n              data: scoreData,\n              backgroundColor: 'rgba(59, 130, 246, 0.6)',\n              borderColor: 'rgb(37, 99, 235)',\n              borderWidth: 1,\n              borderRadius: 4,\n              barPercentage: 0.6,\n              categoryPercentage: 0.7\n            },\n            {\n              label: 'Attendance Rate',\n              data: attendanceData,\n              backgroundColor: 'rgba(52, 211, 153, 0.6)',\n              borderColor: 'rgb(16, 185, 129)',\n              borderWidth: 1,\n              borderRadius: 4,\n              barPercentage: 0.6,\n              categoryPercentage: 0.7\n            }\n          ]\n          },\n          options: {\n            responsive: true,\n            maintainAspectRatio: false,\n          scales: {\n            y: {\n              beginAtZero: true,\n              max: 100,\n              grid: {\n                color: 'rgba(0, 0, 0, 0.05)'\n              },\n              title: {\n                display: true,\n                text: 'Percentage (%)',\n                font: {\n                  size: 14,\n                  weight: 'bold'\n                }\n              }\n            },\n              x: {\n                grid: {\n                  display: false\n              }\n            }\n          },\n          plugins: {\n            legend: {\n              position: 'top',\n              align: 'end',\n              labels: {\n                boxWidth: 12,\n                usePointStyle: true,\n                pointStyle: 'circle'\n              }\n            },\n            tooltip: {\n              callbacks: {\n                label: function(context) {\n                  return `${context.dataset.label}: ${context.parsed.y}%`;\n                }\n              }\n            }\n          }\n        }\n      });\n    };\n\n    const refreshDashboard = () => {\n      fetchDashboardData();\n    };\n\n    const scrollToSection = (sectionId) => {\n      const section = document.getElementById(sectionId);\n      if (section) {\n        section.scrollIntoView({ behavior: 'smooth' });\n      }\n    };\n\n    // Auto-refresh logic\n    const setupAutoRefresh = () => {\n      // Clear any existing interval\n      if (autoRefreshInterval.value) {\n        clearInterval(autoRefreshInterval.value);\n      }\n      \n      // Set new interval (every 5 minutes)\n      autoRefreshInterval.value = setInterval(() => {\n        fetchDashboardData();\n      }, 5 * 60 * 1000);\n    };\n\n    // Fetch data on component mount\n    onMounted(() => {\n      fetchDashboardData();\n      setupAutoRefresh();\n      \n      // Initialize with dummy data while loading\n      nextTick(() => {\n        initDummyData();\n      });\n    });\n\n    // Clean up on component unmount\n    onUnmounted(() => {\n      if (autoRefreshInterval.value) {\n        clearInterval(autoRefreshInterval.value);\n      }\n    });\n\n    return {\n      performanceChart,\n      assessmentTypeChart,\n      performanceTrendChart,\n      sectionChart,\n      selectedYear,\n      selectedSection,\n      selectedSubject,\n      sections,\n      subjects,\n      isCITHead,\n      userName,\n      hasActiveFilters,\n      totalStudents,\n      totalTeachers,\n      averageAttendance,\n      averageScore,\n      activeSections,\n      hasAttendanceData,\n      hasScoreData,\n      hasPerformanceData,\n      hasAssessmentData,\n      hasSectionData,\n      dashboardContainer,\n      isLoading,\n      lastUpdate,\n      formatDate,\n      scrollToSection,\n      handleYearChange,\n      handleFilterChange,\n      clearFilters,\n      getFilterDisplay,\n      refreshDashboard\n    }\n  }\n}\n</script>\n\n<style scoped>\n.dashboard {\n  padding: 1.5rem;\n  background: #f8fafc;\n  min-height: 100vh;\n}\n\n.welcome-section {\n  background: linear-gradient(to right, #1e40af, #3b82f6);\n  padding: 1.5rem;\n  border-radius: 12px;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  color: white;\n  position: relative;\n  overflow: hidden;\n}\n\n.welcome-section::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  width: 300px;\n  background: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMzcuNSAwaDE4Ny41djIxaC0xODcuNXoiIGZpbGw9InJnYmEoMjU1LDI1NSwyNTUsMC4xKSIvPjxwYXRoIGQ9Ik0wIDIxaDI2MnYyMWgtMjYyeiIgZmlsbD0icmdiYSgyNTUsMjU1LDI1NSwwLjA1KSIvPjxwYXRoIGQ9Ik03NSA0MmgxNTB2MjFoLTE1MHoiIGZpbGw9InJnYmEoMjU1LDI1NSwyNTUsMC4xKSIvPjxwYXRoIGQ9Ik0wIDYzaDIyNXYyMWgtMjI1eiIgZmlsbD0icmdiYSgyNTUsMjU1LDI1NSwwLjA1KSIvPjxwYXRoIGQ9Ik0xMTIuNSA4NGgxNTB2MjFoLTE1MHoiIGZpbGw9InJnYmEoMjU1LDI1NSwyNTUsMC4xKSIvPjxwYXRoIGQ9Ik0wIDEwNWgxODcuNXYyMWgtMTg3LjV6IiBmaWxsPSJyZ2JhKDI1NSwyNTUsMjU1LDAuMDUpIi8+PHBhdGggZD0iTTM3LjUgMTI2aDE1MHYyMWgtMTUweiIgZmlsbD0icmdiYSgyNTUsMjU1LDI1NSwwLjEpIi8+PHBhdGggZD0iTTAgMTQ3aDI2MnYyMWgtMjYyeiIgZmlsbD0icmdiYSgyNTUsMjU1LDI1NSwwLjA1KSIvPjxwYXRoIGQ9Ik03NSAxNjhoMTUwdjIxaC0xNTB6IiBmaWxsPSJyZ2JhKDI1NSwyNTUsMjU1LDAuMSkiLz48cGF0aCBkPSJNMCAxODloMjI1djIxaC0yMjV6IiBmaWxsPSJyZ2JhKDI1NSwyNTUsMjU1LDAuMDUpIi8+PHBhdGggZD0iTTExMi41IDIxMGgxNTB2MjFoLTE1MHoiIGZpbGw9InJnYmEoMjU1LDI1NSwyNTUsMC4xKSIvPjxwYXRoIGQ9Ik0wIDIzMWgxODcuNXYyMWgtMTg3LjV6IiBmaWxsPSJyZ2JhKDI1NSwyNTUsMjU1LDAuMDUpIi8+PHBhdGggZD0iTTM3LjUgMjUyaDE1MHYyMWgtMTUweiIgZmlsbD0icmdiYSgyNTUsMjU1LDI1NSwwLjEpIi8+PHBhdGggZD0iTTAgMjczaDI2MnYyMWgtMjYyeiIgZmlsbD0icmdiYSgyNTUsMjU1LDI1NSwwLjA1KSIvPjwvc3ZnPg==') no-repeat center right;\n  opacity: 0.3;\n}\n\n.welcome-title {\n  font-size: 1.75rem;\n  font-weight: 700;\n  margin-bottom: 0.5rem;\n  color: white;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n}\n\n.welcome-subtitle {\n  font-size: 1rem;\n  color: rgba(255, 255, 255, 0.9);\n  font-weight: 400;\n}\n\n.filter-section {\n  background: white;\n  padding: 1.25rem;\n  border-radius: 12px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n  position: relative;\n}\n\n.filter-controls {\n  flex-wrap: wrap;\n  gap: 1rem;\n}\n\n.active-filters {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.5rem;\n  margin-top: 1rem;\n}\n\n.filter-pill {\n  display: flex;\n  align-items: center;\n  background: #f0f9ff;\n  color: #3b82f6;\n  border-radius: 50px;\n  padding: 0.5rem 1rem;\n  font-size: 0.875rem;\n  font-weight: 500;\n}\n\n.filter-pill button {\n  background: none;\n  border: none;\n  color: #3b82f6;\n  margin-left: 0.5rem;\n  padding: 0;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 0.75rem;\n}\n\n.filter-pill button:hover {\n  color: #1e40af;\n}\n\n.last-update {\n  color: #94a3b8;\n  font-size: 0.75rem;\n  text-align: right;\n  margin-top: 1rem;\n  font-style: italic;\n}\n\n.form-select {\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  padding: 0.5rem 2.5rem 0.5rem 1rem;\n  font-size: 0.95rem;\n  color: #2d3748;\n  background-color: white;\n  transition: all 0.2s ease;\n  min-width: 200px;\n}\n\n.form-select:focus {\n  border-color: #4299e1;\n  box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.15);\n}\n\n.btn-refresh {\n  background: white;\n  border: 1px solid #e2e8f0;\n  color: #4a5568;\n  padding: 0.5rem;\n  border-radius: 8px;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n}\n\n.btn-refresh:hover {\n  background: #f7fafc;\n  color: #2d3748;\n  border-color: #cbd5e1;\n}\n\n/* Analytics Grid */\n.analytics-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));\n  gap: 1.5rem;\n}\n\n.performance-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n  gap: 1.5rem;\n}\n\n.charts-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));\n  gap: 1.5rem;\n}\n\n/* Stat Cards */\n.stat-card {\n  background: white;\n  border-radius: 12px;\n  padding: 1.5rem;\n  display: flex;\n  align-items: center;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n  transition: all 0.2s ease;\n}\n\n.stat-card:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n}\n\n.stat-icon {\n  background: #f0f9ff;\n  color: #3b82f6;\n  width: 3.5rem;\n  height: 3.5rem;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.5rem;\n  margin-right: 1rem;\n}\n\n.stat-content {\n  flex: 1;\n}\n\n.stat-value {\n  font-size: 1.75rem;\n  font-weight: 700;\n  color: #1e3a8a;\n  margin: 0;\n  line-height: 1.2;\n}\n\n.stat-label {\n  font-size: 0.875rem;\n  color: #64748b;\n  margin: 0;\n}\n\n/* Chart Cards */\n.chart-card {\n  background: white;\n  border-radius: 12px;\n  padding: 1.5rem;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n  height: 100%;\n  position: relative;\n}\n\n.chart-title {\n  font-size: 1.25rem;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n  color: #1e293b;\n}\n\n.chart-description {\n  color: #64748b;\n  font-size: 0.875rem;\n  margin-bottom: 1.5rem;\n}\n\n.chart-container {\n  position: relative;\n  height: 300px;\n  width: 100%;\n}\n\n.loading-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(255, 255, 255, 0.8);\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  z-index: 10;\n  border-radius: 12px;\n}\n\n.loading-overlay i {\n  font-size: 2rem;\n  color: #3b82f6;\n  margin-bottom: 1rem;\n}\n\n.loading-overlay p {\n  font-size: 0.875rem;\n  color: #64748b;\n}\n\n.no-data-message {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  color: #94a3b8;\n  font-size: 0.875rem;\n  text-align: center;\n}\n\n.no-data {\n  margin-top: 0.5rem;\n  font-size: 0.75rem;\n  color: #94a3b8;\n}\n\n/* Responsive adjustments */\n@media (max-width: 1200px) {\n  .charts-grid {\n    grid-template-columns: 1fr;\n  }\n  }\n\n@media (max-width: 768px) {\n  .stat-card {\n    padding: 1.25rem;\n  }\n  \n  .stat-icon {\n    width: 3rem;\n    height: 3rem;\n    font-size: 1.25rem;\n  }\n\n  .stat-value {\n    font-size: 1.5rem;\n  }\n  \n  .chart-card {\n    padding: 1.25rem;\n  }\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}