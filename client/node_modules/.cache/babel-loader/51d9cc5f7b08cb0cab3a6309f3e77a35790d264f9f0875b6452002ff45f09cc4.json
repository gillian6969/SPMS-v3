{"ast":null,"code":"import { defineComponent } from 'vue';\nexport default defineComponent({\n  name: 'StudentDetailsModal',\n  props: {\n    show: {\n      type: Boolean,\n      required: true\n    },\n    student: {\n      type: Object,\n      required: true\n    },\n    yearLevel: {\n      type: String,\n      default: ''\n    },\n    section: {\n      type: String,\n      default: ''\n    },\n    subject: {\n      type: String,\n      default: ''\n    },\n    title: {\n      type: String,\n      default: 'Student Details'\n    },\n    chartTitle: {\n      type: String,\n      default: 'Performance Overview'\n    },\n    historyTitle: {\n      type: String,\n      default: 'History'\n    },\n    tableHeaders: {\n      type: Array,\n      default: () => ['Date', 'Status']\n    },\n    chartId: {\n      type: String,\n      default: 'studentChart'\n    },\n    isClassRecord: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['close', 'update:show', 'date-filter-change', 'filter-change', 'assessment-type-change'],\n  data() {\n    const today = new Date().toISOString().split('T')[0];\n    const thirtyDaysAgo = new Date();\n    thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n    const thirtyDaysAgoStr = thirtyDaysAgo.toISOString().split('T')[0];\n    return {\n      dateFilter: {\n        start: thirtyDaysAgoStr,\n        end: today\n      },\n      selectedAssessmentType: 'All'\n    };\n  },\n  mounted() {\n    // Apply initial filter when component is mounted\n    this.applyFilter();\n  },\n  methods: {\n    closeModal() {\n      this.$emit('update:show', false);\n      this.$emit('close');\n    },\n    handleDateFilterChange() {\n      // Date inputs change handler - we don't auto-apply\n      console.log('Date filter changed:', this.dateFilter);\n    },\n    applyFilter() {\n      console.log('Applying filter:', this.dateFilter);\n\n      // Create filter object for date-filter-change (original format)\n      const dateFilter = {\n        start: this.dateFilter.start,\n        end: this.dateFilter.end\n      };\n\n      // Create comprehensive filter object for filter-change\n      const fullFilter = {\n        startDate: this.dateFilter.start,\n        endDate: this.dateFilter.end,\n        studentId: this.student?.id || this.student?.studentId || this.student?.studentNumber,\n        yearLevel: this.yearLevel,\n        section: this.section,\n        subject: this.subject\n      };\n      console.log('Emitting filter events:', {\n        dateFilter,\n        fullFilter\n      });\n\n      // Emit both events to ensure compatibility\n      this.$emit('date-filter-change', dateFilter);\n      this.$emit('filter-change', fullFilter);\n    },\n    changeAssessmentType(type) {\n      console.log('Changing assessment type to:', type);\n      this.selectedAssessmentType = type;\n      this.$emit('assessment-type-change', type);\n    }\n  }\n});","map":{"version":3,"names":["defineComponent","name","props","show","type","Boolean","required","student","Object","yearLevel","String","default","section","subject","title","chartTitle","historyTitle","tableHeaders","Array","chartId","isClassRecord","emits","data","today","Date","toISOString","split","thirtyDaysAgo","setDate","getDate","thirtyDaysAgoStr","dateFilter","start","end","selectedAssessmentType","mounted","applyFilter","methods","closeModal","$emit","handleDateFilterChange","console","log","fullFilter","startDate","endDate","studentId","id","studentNumber","changeAssessmentType"],"sources":["D:\\au_dev\\client\\src\\components\\modals\\StudentDetailsModal.vue"],"sourcesContent":["<template>\n  <teleport to=\"body\">\n    <div v-if=\"show\" class=\"modal-overlay\" @click.self=\"closeModal\">\n      <div class=\"modal-wrapper\" @click.stop>\n        <div class=\"modal-dialog modal-xxl\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header bg-primary text-white\">\n              <h5 class=\"modal-title\">\n                <i class=\"fas fa-user-graduate me-2\"></i>\n                {{ title }}\n              </h5>\n              <button type=\"button\" class=\"btn-close btn-close-white\" @click=\"closeModal\"></button>\n            </div>\n            <div class=\"modal-body\">\n              <div class=\"student-details\">\n                <!-- Student Information (Left Side) -->\n                <div class=\"student-info\">\n                  <h6 class=\"info-title\">Student Information</h6>\n                  <div class=\"info-content\">\n                    <p><strong>Student ID:</strong> {{ student?.studentNumber }}</p>\n                    <p><strong>Name:</strong> {{ student?.firstName }} {{ student?.lastName }}</p>\n                    <p><strong>Year Level:</strong> {{ yearLevel }}</p>\n                    <p><strong>Section:</strong> {{ section }}</p>\n                    <p><strong>Subject:</strong> {{ subject }}</p>\n                    <slot name=\"additional-info\"></slot>\n                  </div>\n                </div>\n\n                <!-- Performance and Data (Right Side) -->\n                <div class=\"student-charts\">\n                  <!-- Date Filter (Common for both class records and attendance) -->\n                  <div class=\"chart-controls mb-3\">\n                    <div class=\"date-filter\">\n                      <div class=\"input-group input-group-sm\">\n                        <span class=\"input-group-text\">From</span>\n                        <input \n                          type=\"date\" \n                          class=\"form-control\" \n                          v-model=\"dateFilter.start\"\n                          @change=\"handleDateFilterChange\"\n                        >\n                        <span class=\"input-group-text\">To</span>\n                        <input \n                          type=\"date\" \n                          class=\"form-control\" \n                          v-model=\"dateFilter.end\"\n                          @change=\"handleDateFilterChange\"\n                        >\n                        <button class=\"btn btn-primary\" @click=\"applyFilter\">\n                          <i class=\"fas fa-filter me-1\"></i> Apply\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n\n                  <!-- Class Records Chart -->\n                  <div v-if=\"isClassRecord\" class=\"chart-section\">\n                    <h6>Assessment Performance</h6>\n                    <div class=\"chart-container\" style=\"height: 400px;\">\n                      <canvas :id=\"`all-${chartId}`\"></canvas>\n                    </div>\n                  </div>\n                  \n                  <!-- Attendance Chart -->\n                  <div v-else class=\"chart-section\">\n                    <h6>{{ chartTitle }}</h6>\n                    <div class=\"chart-container\" style=\"height: 400px;\">\n                      <canvas :id=\"chartId\"></canvas>\n                    </div>\n                  </div>\n                  \n                  <!-- History Section -->\n                  <div class=\"chart-section\">\n                    <h6>{{ historyTitle }}</h6>\n                    <div class=\"table-responsive data-table\">\n                      <slot name=\"history-table\">\n                        <!-- Default history table if no slot provided -->\n                        <table class=\"table\">\n                          <thead>\n                            <tr>\n                              <th v-for=\"header in tableHeaders\" :key=\"header\">{{ header }}</th>\n                            </tr>\n                          </thead>\n                          <tbody>\n                            <slot name=\"table-rows\">\n                              <tr>\n                                <td colspan=\"100%\" class=\"text-center py-3 text-muted\">\n                                  <i class=\"fas fa-info-circle me-2\"></i>No records found.\n                                </td>\n                              </tr>\n                            </slot>\n                          </tbody>\n                        </table>\n                      </slot>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class=\"modal-footer\">\n              <button type=\"button\" class=\"btn btn-secondary\" @click=\"closeModal\">\n                <i class=\"fas fa-times me-2\"></i>Close\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"modal-backdrop\" @click=\"closeModal\"></div>\n    </div>\n  </teleport>\n</template>\n\n<script>\nimport { defineComponent } from 'vue'\n\nexport default defineComponent({\n  name: 'StudentDetailsModal',\n  \n  props: {\n    show: {\n      type: Boolean,\n      required: true\n    },\n    student: {\n      type: Object,\n      required: true\n    },\n    yearLevel: {\n      type: String,\n      default: ''\n    },\n    section: {\n      type: String,\n      default: ''\n    },\n    subject: {\n      type: String,\n      default: ''\n    },\n    title: {\n      type: String,\n      default: 'Student Details'\n    },\n    chartTitle: {\n      type: String,\n      default: 'Performance Overview'\n    },\n    historyTitle: {\n      type: String,\n      default: 'History'\n    },\n    tableHeaders: {\n      type: Array,\n      default: () => ['Date', 'Status']\n    },\n    chartId: {\n      type: String,\n      default: 'studentChart'\n    },\n    isClassRecord: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  emits: ['close', 'update:show', 'date-filter-change', 'filter-change', 'assessment-type-change'],\n\n  data() {\n    const today = new Date().toISOString().split('T')[0];\n    const thirtyDaysAgo = new Date();\n    thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n    const thirtyDaysAgoStr = thirtyDaysAgo.toISOString().split('T')[0];\n    \n    return {\n      dateFilter: {\n        start: thirtyDaysAgoStr,\n        end: today\n      },\n      selectedAssessmentType: 'All'\n    }\n  },\n\n  mounted() {\n    // Apply initial filter when component is mounted\n    this.applyFilter();\n  },\n\n  methods: {\n    closeModal() {\n      this.$emit('update:show', false)\n      this.$emit('close')\n    },\n\n    handleDateFilterChange() {\n      // Date inputs change handler - we don't auto-apply\n      console.log('Date filter changed:', this.dateFilter);\n    },\n\n    applyFilter() {\n      console.log('Applying filter:', this.dateFilter);\n      \n      // Create filter object for date-filter-change (original format)\n      const dateFilter = {\n        start: this.dateFilter.start,\n        end: this.dateFilter.end\n      };\n      \n      // Create comprehensive filter object for filter-change\n      const fullFilter = {\n        startDate: this.dateFilter.start,\n        endDate: this.dateFilter.end,\n        studentId: this.student?.id || this.student?.studentId || this.student?.studentNumber,\n        yearLevel: this.yearLevel,\n        section: this.section,\n        subject: this.subject\n      };\n      \n      console.log('Emitting filter events:', { dateFilter, fullFilter });\n      \n      // Emit both events to ensure compatibility\n      this.$emit('date-filter-change', dateFilter);\n      this.$emit('filter-change', fullFilter);\n    },\n\n    changeAssessmentType(type) {\n      console.log('Changing assessment type to:', type);\n      this.selectedAssessmentType = type;\n      this.$emit('assessment-type-change', type);\n    }\n  }\n})\n</script>\n\n<style scoped>\n/* Base z-index hierarchy */\n:root {\n  --z-modal-backdrop: 9999;\n  --z-modal-wrapper: 10000;\n  --z-modal-content: 10001;\n  --z-table-header: 10002;\n}\n\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10000;\n}\n\n.modal-backdrop {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background-color: rgba(0, 0, 0, 0.5);\n  backdrop-filter: blur(4px);\n  z-index: 9999;\n  cursor: pointer;\n}\n\n.modal-wrapper {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10001;\n}\n\n.modal-dialog {\n  position: relative;\n  width: 90%;\n  max-width: 1200px;\n  margin: 1.75rem auto;\n  pointer-events: auto;\n}\n\n.modal-content {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  pointer-events: auto;\n  background-color: #fff;\n  background-clip: padding-box;\n  border: none;\n  border-radius: 0.5rem;\n  box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);\n  outline: 0;\n  max-height: calc(100vh - 3.5rem);\n  overflow: hidden;\n}\n\n.modal-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1.5rem;\n  border-bottom: 1px solid #dee2e6;\n  border-top-left-radius: calc(0.5rem - 1px);\n  border-top-right-radius: calc(0.5rem - 1px);\n}\n\n.modal-body {\n  position: relative;\n  flex: 1 1 auto;\n  padding: 1.5rem;\n  overflow-y: auto;\n}\n\n/* Student details layout */\n.student-details {\n  display: grid;\n  grid-template-columns: 300px 1fr;\n  gap: 1.5rem;\n}\n\n.student-info {\n  background: #f8fafc;\n  padding: 2rem;\n  border-radius: 12px;\n  height: fit-content;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n}\n\n.info-title {\n  color: #2d3748;\n  font-size: 1.4rem;\n  font-weight: 600;\n  margin-bottom: 2rem;\n  padding-bottom: 1rem;\n  border-bottom: 2px solid #e2e8f0;\n}\n\n.info-content p {\n  margin-bottom: 1.25rem;\n  padding-bottom: 1.25rem;\n  border-bottom: 1px solid #e2e8f0;\n  font-size: 1.2rem;\n  line-height: 1.5;\n}\n\n.info-content strong {\n  color: #4a5568;\n  display: inline-block;\n  width: 160px;\n  font-weight: 600;\n}\n\n.student-charts {\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n}\n\n.charts-container {\n  display: grid;\n  grid-template-columns: 1fr;\n  gap: 1.5rem;\n}\n\n.chart-section {\n  background: white;\n  border-radius: 12px;\n  padding: 2rem;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  margin-bottom: 0;\n  position: relative;\n  overflow: hidden;\n}\n\n.chart-section::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 5px;\n  background: linear-gradient(to right, #4285F4, #34A853, #FBBC05, #EA4335);\n}\n\n.chart-section h6 {\n  color: #2d3748;\n  font-size: 1.2rem;\n  font-weight: 600;\n  margin-bottom: 1.5rem;\n  display: flex;\n  align-items: center;\n}\n\n.chart-section h6::before {\n  content: '\\f080';\n  font-family: 'Font Awesome 5 Free';\n  font-weight: 900;\n  margin-right: 0.75rem;\n  color: #4285F4;\n}\n\n.chart-container {\n  position: relative;\n  width: 100%;\n  height: 400px !important;\n  background: linear-gradient(to bottom, rgba(249, 250, 251, 0.5), rgba(249, 250, 251, 0));\n  border-radius: 8px;\n  padding: 1rem;\n}\n\n.data-table {\n  margin-top: 1.5rem;\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n.data-table th {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #2d3748;\n  background: #f8fafc;\n  position: sticky;\n  top: 0;\n  z-index: var(--z-table-header);\n  padding: 0.75rem 1rem;\n  border-bottom: 2px solid #e2e8f0;\n}\n\n.data-table td {\n  font-size: 1.1rem;\n  color: #4a5568;\n  padding: 0.75rem 1rem;\n  border-bottom: 1px solid #e2e8f0;\n}\n\n.data-table tr:hover {\n  background-color: #f8fafc;\n}\n\n.btn-close-white {\n  filter: brightness(0) invert(1);\n}\n\n/* Responsive adjustments */\n@media (max-width: 1200px) {\n  .modal-dialog {\n    margin-right: 1rem;\n    max-width: 90%;\n  }\n}\n\n@media (max-width: 992px) {\n  .student-details {\n    grid-template-columns: 1fr;\n  }\n  \n  .student-info {\n    margin-bottom: 1.5rem;\n  }\n}\n\n.modal-footer {\n  border-top: 1px solid #e2e8f0;\n  padding: 1rem 1.5rem;\n  display: flex;\n  justify-content: flex-end;\n}\n\n.chart-controls {\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  background: #f8fafc;\n  padding: 1rem;\n  border-radius: 8px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\n}\n\n.date-filter {\n  width: 100%;\n}\n\n.date-filter .input-group {\n  display: flex;\n  align-items: center;\n}\n\n.date-filter .input-group-text {\n  background-color: #f1f5f9;\n  border-color: #e2e8f0;\n  color: #4a5568;\n  font-weight: 500;\n}\n\n.date-filter .form-control {\n  border-color: #e2e8f0;\n  color: #4a5568;\n  font-weight: 500;\n}\n\n.date-filter .btn {\n  margin-left: 8px;\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}