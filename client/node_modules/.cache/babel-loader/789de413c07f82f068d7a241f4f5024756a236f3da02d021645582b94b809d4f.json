{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelSelect as _vModelSelect, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, withModifiers as _withModifiers, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"edit-profile\"\n};\nconst _hoisted_2 = {\n  class: \"card\"\n};\nconst _hoisted_3 = {\n  class: \"card-body\"\n};\nconst _hoisted_4 = {\n  class: \"mb-3\"\n};\nconst _hoisted_5 = {\n  class: \"mb-3\"\n};\nconst _hoisted_6 = {\n  class: \"mb-3\"\n};\nconst _hoisted_7 = {\n  key: 0,\n  class: \"mb-3\"\n};\nconst _hoisted_8 = {\n  class: \"d-flex justify-content-end gap-2\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[12] || (_cache[12] = _createElementVNode(\"div\", {\n    class: \"card-header\"\n  }, [_createElementVNode(\"h4\", null, \"Edit Profile\")], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"form\", {\n    onSubmit: _cache[4] || (_cache[4] = _withModifiers((...args) => $setup.updateProfile && $setup.updateProfile(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_4, [_cache[5] || (_cache[5] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, \"First Name\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.form.firstName = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.firstName]])]), _createElementVNode(\"div\", _hoisted_5, [_cache[6] || (_cache[6] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, \"Last Name\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.form.lastName = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.lastName]])]), _createElementVNode(\"div\", _hoisted_6, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, \"Email\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"email\",\n    class: \"form-control\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.form.email = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.email]])]), $setup.isTeacher ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_cache[9] || (_cache[9] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, \"Teaching Year\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n    class: \"form-select\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.form.teachingYear = $event),\n    required: \"\"\n  }, _cache[8] || (_cache[8] = [_createStaticVNode(\"<option value=\\\"\\\" data-v-7b259475>Select Year</option><option value=\\\"1st\\\" data-v-7b259475>1st Year</option><option value=\\\"2nd\\\" data-v-7b259475>2nd Year</option><option value=\\\"3rd\\\" data-v-7b259475>3rd Year</option><option value=\\\"4th\\\" data-v-7b259475>4th Year</option>\", 5)]), 512 /* NEED_PATCH */), [[_vModelSelect, $setup.form.teachingYear]])])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_8, [_createVNode(_component_router_link, {\n    to: $setup.isTeacher ? '/teacher-dashboard' : $setup.isSSP || $setup.isSSPHead ? '/ssp-dashboard' : '/dashboard',\n    class: \"btn btn-secondary\"\n  }, {\n    default: _withCtx(() => _cache[10] || (_cache[10] = [_createTextVNode(\" Cancel \")])),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"to\"]), _cache[11] || (_cache[11] = _createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"btn btn-primary\"\n  }, \"Save Changes\", -1 /* HOISTED */))])], 32 /* NEED_HYDRATION */)])])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","onSubmit","_cache","_withModifiers","args","$setup","updateProfile","_hoisted_4","type","$event","form","firstName","required","_hoisted_5","lastName","_hoisted_6","email","isTeacher","_hoisted_7","teachingYear","_createStaticVNode","_createCommentVNode","_hoisted_8","_createVNode","_component_router_link","to","isSSP","isSSPHead","default","_withCtx","_createTextVNode","_"],"sources":["D:\\au_dev\\client\\src\\views\\EditProfile.vue"],"sourcesContent":["<template>\r\n  <div class=\"edit-profile\">\r\n    <div class=\"card\">\r\n      <div class=\"card-header\">\r\n        <h4>Edit Profile</h4>\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <form @submit.prevent=\"updateProfile\">\r\n          <div class=\"mb-3\">\r\n            <label class=\"form-label\">First Name</label>\r\n            <input \r\n              type=\"text\" \r\n              class=\"form-control\" \r\n              v-model=\"form.firstName\"\r\n              required\r\n            >\r\n          </div>\r\n          \r\n          <div class=\"mb-3\">\r\n            <label class=\"form-label\">Last Name</label>\r\n            <input \r\n              type=\"text\" \r\n              class=\"form-control\" \r\n              v-model=\"form.lastName\"\r\n              required\r\n            >\r\n          </div>\r\n          \r\n          <div class=\"mb-3\">\r\n            <label class=\"form-label\">Email</label>\r\n            <input \r\n              type=\"email\" \r\n              class=\"form-control\" \r\n              v-model=\"form.email\"\r\n              required\r\n            >\r\n          </div>\r\n\r\n          <div v-if=\"isTeacher\" class=\"mb-3\">\r\n            <label class=\"form-label\">Teaching Year</label>\r\n            <select class=\"form-select\" v-model=\"form.teachingYear\" required>\r\n              <option value=\"\">Select Year</option>\r\n              <option value=\"1st\">1st Year</option>\r\n              <option value=\"2nd\">2nd Year</option>\r\n              <option value=\"3rd\">3rd Year</option>\r\n              <option value=\"4th\">4th Year</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div class=\"d-flex justify-content-end gap-2\">\r\n            <router-link \r\n              :to=\"isTeacher ? '/teacher-dashboard' : isSSP || isSSPHead ? '/ssp-dashboard' : '/dashboard'\" \r\n              class=\"btn btn-secondary\"\r\n            >\r\n              Cancel\r\n            </router-link>\r\n            <button type=\"submit\" class=\"btn btn-primary\">Save Changes</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed, onMounted } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRouter } from 'vue-router'\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'EditProfile',\r\n  setup() {\r\n    const store = useStore()\r\n    const router = useRouter()\r\n    const form = ref({\r\n      firstName: '',\r\n      lastName: '',\r\n      email: '',\r\n      teachingYear: ''\r\n    })\r\n\r\n    const isTeacher = computed(() => store.getters.isTeacher)\r\n    const isSSP = computed(() => store.getters.isSSP)\r\n    const isSSPHead = computed(() => store.getters.isSSPHead)\r\n    const user = computed(() => store.state.auth.user)\r\n\r\n    onMounted(() => {\r\n      // Initialize form with current user data\r\n      if (user.value) {\r\n        form.value = {\r\n          firstName: user.value.firstName || '',\r\n          lastName: user.value.lastName || '',\r\n          email: user.value.email || '',\r\n          teachingYear: user.value.teachingYear || ''\r\n        }\r\n      }\r\n    })\r\n\r\n    const updateProfile = async () => {\r\n      try {\r\n        const response = await axios.put('/api/users/profile', form.value, {\r\n          headers: {\r\n            Authorization: `Bearer ${store.state.auth.token}`\r\n          }\r\n        })\r\n\r\n        if (response.data) {\r\n          // Update store with new user data\r\n          store.commit('SET_USER', response.data)\r\n          // Save to localStorage\r\n          localStorage.setItem('user', JSON.stringify(response.data))\r\n          \r\n          // Show success message\r\n          alert('Profile updated successfully!')\r\n          \r\n          // Redirect based on user role\r\n          if (isTeacher.value) {\r\n            router.push('/teacher-dashboard')\r\n          } else if (isSSP.value) {\r\n            router.push('/ssp-dashboard')\r\n          } else if (isSSPHead.value) {\r\n            router.push('/ssp-dashboard')\r\n          } else {\r\n            router.push('/dashboard')\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to update profile:', error)\r\n        alert(error.response?.data?.message || 'Failed to update profile')\r\n      }\r\n    }\r\n\r\n    return {\r\n      form,\r\n      isTeacher,\r\n      isSSP,\r\n      isSSPHead,\r\n      updateProfile\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.edit-profile {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  padding: 2rem;\r\n}\r\n\r\n.card {\r\n  background: white;\r\n  border: none;\r\n  border-radius: 20px;\r\n  box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1),\r\n              0 5px 15px rgba(0, 0, 0, 0.05);\r\n  overflow: hidden;\r\n  backdrop-filter: blur(10px);\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  position: relative;\r\n}\r\n\r\n.card::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: radial-gradient(circle at top right, rgba(32, 52, 100, 0.03), transparent);\r\n  pointer-events: none;\r\n}\r\n\r\n.card-header {\r\n  background: linear-gradient(135deg, #203464, #2a4580);\r\n  border: none;\r\n  padding: 2rem;\r\n  position: relative;\r\n  overflow: hidden;\r\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.card-header::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: radial-gradient(circle at top right, rgba(255, 255, 255, 0.1), transparent);\r\n  pointer-events: none;\r\n}\r\n\r\n.card-header h4 {\r\n  margin: 0;\r\n  color: white;\r\n  font-size: 1.5rem;\r\n  font-weight: 600;\r\n  position: relative;\r\n}\r\n\r\n.card-body {\r\n  padding: 2.5rem;\r\n  position: relative;\r\n}\r\n\r\n.form-label {\r\n  font-weight: 500;\r\n  color: #64748b;\r\n  font-size: 0.9rem;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.5px;\r\n  margin-bottom: 0.75rem;\r\n  display: block;\r\n  transition: color 0.3s ease;\r\n}\r\n\r\n.form-control,\r\n.form-select {\r\n  padding: 0.75rem 1rem;\r\n  border-radius: 12px;\r\n  border: 2px solid #e2e8f0;\r\n  font-size: 1rem;\r\n  transition: all 0.3s ease;\r\n  background-color: #f8fafc;\r\n  width: 100%;\r\n}\r\n\r\n.form-control:focus,\r\n.form-select:focus {\r\n  border-color: #203464;\r\n  box-shadow: 0 0 0 4px rgba(32, 52, 100, 0.1);\r\n  background-color: white;\r\n  outline: none;\r\n}\r\n\r\n.form-control:hover,\r\n.form-select:hover {\r\n  border-color: #cbd5e1;\r\n}\r\n\r\n.mb-3 {\r\n  margin-bottom: 1.5rem;\r\n  position: relative;\r\n}\r\n\r\n.mb-3:focus-within .form-label {\r\n  color: #203464;\r\n}\r\n\r\n.d-flex {\r\n  margin-top: 2.5rem;\r\n  padding-top: 2rem;\r\n  border-top: 1px solid rgba(0, 0, 0, 0.05);\r\n  position: relative;\r\n}\r\n\r\n.d-flex::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: -1px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  width: 50px;\r\n  height: 2px;\r\n  background: linear-gradient(90deg, transparent, #203464, transparent);\r\n}\r\n\r\n.btn {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 0.75rem;\r\n  padding: 0.875rem 2rem;\r\n  border-radius: 12px;\r\n  font-weight: 500;\r\n  font-size: 1rem;\r\n  transition: all 0.3s ease;\r\n  border: none;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.btn::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\r\n  transform: translateX(-100%);\r\n  transition: transform 0.5s ease;\r\n}\r\n\r\n.btn:hover::before {\r\n  transform: translateX(100%);\r\n}\r\n\r\n.btn-primary {\r\n  background: linear-gradient(135deg, #203464, #2a4580);\r\n  color: white;\r\n  box-shadow: 0 4px 15px rgba(32, 52, 100, 0.3);\r\n}\r\n\r\n.btn-primary:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 8px 25px rgba(32, 52, 100, 0.4);\r\n}\r\n\r\n.btn-secondary {\r\n  background: #f1f5f9;\r\n  color: #475569;\r\n  border: 1px solid rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background: #e2e8f0;\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.btn-loading {\r\n  position: relative;\r\n  pointer-events: none;\r\n}\r\n\r\n.btn-loading::after {\r\n  content: '';\r\n  position: absolute;\r\n  width: 20px;\r\n  height: 20px;\r\n  border: 2px solid transparent;\r\n  border-top-color: currentColor;\r\n  border-radius: 50%;\r\n  animation: button-loading 0.8s ease infinite;\r\n  left: calc(50% - 10px);\r\n}\r\n\r\n@keyframes button-loading {\r\n  from {\r\n    transform: rotate(0turn);\r\n  }\r\n  to {\r\n    transform: rotate(1turn);\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .edit-profile {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .card-header {\r\n    padding: 1.5rem;\r\n  }\r\n  \r\n  .card-body {\r\n    padding: 1.5rem;\r\n  }\r\n  \r\n  .d-flex {\r\n    flex-direction: column;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .btn {\r\n    width: 100%;\r\n    justify-content: center;\r\n  }\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}